{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion}from'framer-motion';import{MessageCircle,Clock,DollarSign,User,Search,Filter,CheckCircle,AlertCircle,Calendar,MapPin,Star,Bell,BellOff}from'lucide-react';import{api}from'../../services/api';import{useAuth}from'../../contexts/AuthContext';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ConversationsList=_ref=>{let{onSelectConversation,selectedJobId}=_ref;const{user}=useAuth();const[conversations,setConversations]=useState([]);const[loading,setLoading]=useState(true);const[searchTerm,setSearchTerm]=useState('');const[statusFilter,setStatusFilter]=useState('');const[totalUnread,setTotalUnread]=useState(0);useEffect(()=>{fetchConversations();// Refresh conversations every 30 seconds\nconst interval=setInterval(fetchConversations,30000);return()=>clearInterval(interval);},[statusFilter]);const fetchConversations=async()=>{try{const params=new URLSearchParams();if(statusFilter)params.append('status',statusFilter);// Try to fetch from API first\ntry{const response=await api.get(`/messages/conversations?${params}`);setConversations(response.data.conversations);setTotalUnread(response.data.totalUnread);}catch(apiError){var _apiError$message,_apiError$message2;// If API endpoint doesn't exist, use sample data\nconsole.log('Messages API not available, using sample data');// Don't show error toast for expected API unavailability\nif(!((_apiError$message=apiError.message)!==null&&_apiError$message!==void 0&&_apiError$message.includes('404'))&&!((_apiError$message2=apiError.message)!==null&&_apiError$message2!==void 0&&_apiError$message2.includes('Network Error'))){console.warn('Unexpected API error:',apiError);}// Generate sample conversations based on user role\nconst sampleConversations=[{_id:'conv_1',title:'Plumbing Repair - Kitchen Sink',jobNumber:'JOB1755221424634BA9G',status:'IN_DISCUSSION',priority:'HIGH',category:'plumbing',estimatedBudget:250,location:{city:'Singapore',address:'123 Main Street'},customer:(user===null||user===void 0?void 0:user.role)==='vendor'?{firstName:'John',lastName:'Smith'}:null,vendor:(user===null||user===void 0?void 0:user.role)==='customer'?{firstName:'Mike',lastName:'Johnson'}:null,createdAt:new Date(Date.now()-2*60*60*1000).toISOString(),// 2 hours ago\nunreadCount:2,messageCount:8,lastMessage:{content:'I can fix this today. When would be a good time?',createdAt:new Date(Date.now()-30*60*1000).toISOString(),// 30 minutes ago\nmessageType:'TEXT'}},{_id:'conv_2',title:'House Cleaning Service',jobNumber:'JOB1755224485804756G',status:'QUOTE_SENT',priority:'MEDIUM',category:'cleaning',estimatedBudget:120,location:{city:'Singapore',address:'456 Oak Avenue'},customer:(user===null||user===void 0?void 0:user.role)==='vendor'?{firstName:'Sarah',lastName:'Wilson'}:null,vendor:(user===null||user===void 0?void 0:user.role)==='customer'?{firstName:'Lisa',lastName:'Chen'}:null,createdAt:new Date(Date.now()-1*24*60*60*1000).toISOString(),// 1 day ago\nunreadCount:0,messageCount:5,lastMessage:{content:'Quote sent: $120 for deep cleaning service',createdAt:new Date(Date.now()-3*60*60*1000).toISOString(),// 3 hours ago\nmessageType:'QUOTE'}},{_id:'conv_3',title:'Electrical Installation',jobNumber:'JOB1755228901234567H',status:'COMPLETED',priority:'MEDIUM',category:'electrical',estimatedBudget:300,location:{city:'Singapore',address:'789 Pine Street'},customer:(user===null||user===void 0?void 0:user.role)==='vendor'?{firstName:'David',lastName:'Brown'}:null,vendor:(user===null||user===void 0?void 0:user.role)==='customer'?{firstName:'Alex',lastName:'Rodriguez'}:null,createdAt:new Date(Date.now()-3*24*60*60*1000).toISOString(),// 3 days ago\nunreadCount:0,messageCount:12,lastMessage:{content:'Thank you for choosing our service! Job completed successfully.',createdAt:new Date(Date.now()-2*24*60*60*1000).toISOString(),// 2 days ago\nmessageType:'SYSTEM'}}];// Filter sample data based on status filter\nconst filteredData=statusFilter?sampleConversations.filter(conv=>conv.status===statusFilter):sampleConversations;setConversations(filteredData);setTotalUnread(filteredData.reduce((sum,conv)=>sum+conv.unreadCount,0));}}catch(error){console.error('Error fetching conversations:',error);toast.error('Failed to load conversations');// Set empty state on complete failure\nsetConversations([]);setTotalUnread(0);}finally{setLoading(false);}};const filteredConversations=conversations.filter(conv=>{var _conv$customer,_conv$customer$firstN,_conv$customer2,_conv$customer2$lastN,_conv$vendor,_conv$vendor$firstNam,_conv$vendor2,_conv$vendor2$lastNam;if(!searchTerm)return true;const searchLower=searchTerm.toLowerCase();return conv.title.toLowerCase().includes(searchLower)||conv.jobNumber.toLowerCase().includes(searchLower)||((_conv$customer=conv.customer)===null||_conv$customer===void 0?void 0:(_conv$customer$firstN=_conv$customer.firstName)===null||_conv$customer$firstN===void 0?void 0:_conv$customer$firstN.toLowerCase().includes(searchLower))||((_conv$customer2=conv.customer)===null||_conv$customer2===void 0?void 0:(_conv$customer2$lastN=_conv$customer2.lastName)===null||_conv$customer2$lastN===void 0?void 0:_conv$customer2$lastN.toLowerCase().includes(searchLower))||((_conv$vendor=conv.vendor)===null||_conv$vendor===void 0?void 0:(_conv$vendor$firstNam=_conv$vendor.firstName)===null||_conv$vendor$firstNam===void 0?void 0:_conv$vendor$firstNam.toLowerCase().includes(searchLower))||((_conv$vendor2=conv.vendor)===null||_conv$vendor2===void 0?void 0:(_conv$vendor2$lastNam=_conv$vendor2.lastName)===null||_conv$vendor2$lastNam===void 0?void 0:_conv$vendor2$lastNam.toLowerCase().includes(searchLower));});const getStatusColor=status=>{const colors={PENDING:'bg-yellow-100 text-yellow-800',ASSIGNED:'bg-blue-100 text-blue-800',IN_DISCUSSION:'bg-purple-100 text-purple-800',QUOTE_SENT:'bg-indigo-100 text-indigo-800',QUOTE_ACCEPTED:'bg-green-100 text-green-800',PAID:'bg-emerald-100 text-emerald-800',IN_PROGRESS:'bg-orange-100 text-orange-800',COMPLETED:'bg-green-200 text-green-900',CANCELLED:'bg-red-100 text-red-800'};return colors[status]||'bg-gray-100 text-gray-800';};const getPriorityIcon=priority=>{if(priority==='EMERGENCY')return'ðŸš¨';if(priority==='HIGH')return'ðŸ”´';if(priority==='MEDIUM')return'ðŸŸ¡';return'ðŸŸ¢';};const formatRelativeTime=date=>{const now=new Date();const messageDate=new Date(date);const diffInMinutes=Math.floor((now-messageDate)/(1000*60));if(diffInMinutes<1)return'Just now';if(diffInMinutes<60)return`${diffInMinutes}m ago`;const diffInHours=Math.floor(diffInMinutes/60);if(diffInHours<24)return`${diffInHours}h ago`;const diffInDays=Math.floor(diffInHours/24);if(diffInDays<7)return`${diffInDays}d ago`;return messageDate.toLocaleDateString();};const ConversationItem=_ref2=>{var _conversation$locatio,_conversation$estimat;let{conversation}=_ref2;const isSelected=selectedJobId===conversation._id;const hasUnread=conversation.unreadCount>0;const otherParty=(user===null||user===void 0?void 0:user.role)==='vendor'?conversation.customer:conversation.vendor;return/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},className:`cursor-pointer p-4 border-b border-gray-200 hover:bg-gray-50 ${isSelected?'bg-orange-50 border-orange-200':''}`,onClick:()=>onSelectConversation(conversation),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:`w-10 h-10 rounded-full flex items-center justify-center ${otherParty?'bg-gray-200':'bg-orange-200'}`,children:/*#__PURE__*/_jsx(User,{className:\"w-5 h-5 text-gray-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-900 truncate\",children:conversation.title}),hasUnread&&/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-orange-500 rounded-full\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[conversation.priority!=='NORMAL'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:getPriorityIcon(conversation.priority)}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:conversation.lastMessage?formatRelativeTime(conversation.lastMessage.createdAt):formatRelativeTime(conversation.createdAt)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:conversation.jobNumber}),otherParty&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2\",children:[\"with \",otherParty.firstName,\" \",otherParty.lastName]})]}),/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(conversation.status)}`,children:conversation.status.replace('_',' ')})]}),conversation.lastMessage&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 truncate\",children:[conversation.lastMessage.messageType==='QUOTE'&&'ðŸ’°',conversation.lastMessage.messageType==='CONTACT_INFO'&&'ðŸ“ž',conversation.lastMessage.messageType==='SYSTEM'&&'ðŸ¤–',/*#__PURE__*/_jsx(\"span\",{className:\"ml-1\",children:conversation.lastMessage.content})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-2 text-xs text-gray-500\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-3 h-3 mr-1\"}),(_conversation$locatio=conversation.location)===null||_conversation$locatio===void 0?void 0:_conversation$locatio.city]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(DollarSign,{className:\"w-3 h-3 mr-1\"}),\"$\",(_conversation$estimat=conversation.estimatedBudget)===null||_conversation$estimat===void 0?void 0:_conversation$estimat.toFixed(0)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[conversation.messageCount>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(MessageCircle,{className:\"w-3 h-3 mr-1\"}),conversation.messageCount]}),hasUnread&&/*#__PURE__*/_jsx(\"span\",{className:\"bg-orange-500 text-white px-2 py-1 rounded-full text-xs\",children:conversation.unreadCount})]})]})]})]})});};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"h-full flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:[\"Messages\",totalUnread>0&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 bg-orange-500 text-white px-2 py-1 rounded-full text-xs\",children:totalUnread})]}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchConversations,className:\"text-orange-600 hover:text-orange-800\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative mb-3\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-3 w-4 h-4 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"Search conversations...\",className:\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:statusFilter,onChange:e=>setStatusFilter(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Statuses\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PENDING\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ASSIGNED\",children:\"Assigned\"}),/*#__PURE__*/_jsx(\"option\",{value:\"IN_DISCUSSION\",children:\"In Discussion\"}),/*#__PURE__*/_jsx(\"option\",{value:\"QUOTE_SENT\",children:\"Quote Sent\"}),/*#__PURE__*/_jsx(\"option\",{value:\"QUOTE_ACCEPTED\",children:\"Quote Accepted\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PAID\",children:\"Paid\"}),/*#__PURE__*/_jsx(\"option\",{value:\"IN_PROGRESS\",children:\"In Progress\"}),/*#__PURE__*/_jsx(\"option\",{value:\"COMPLETED\",children:\"Completed\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto\",children:filteredConversations.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 text-gray-500\",children:[/*#__PURE__*/_jsx(MessageCircle,{className:\"w-12 h-12 mx-auto mb-4 text-gray-300\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No conversations found\"}),searchTerm&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-2\",children:\"Try adjusting your search terms\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"divide-y divide-gray-200\",children:filteredConversations.map(conversation=>/*#__PURE__*/_jsx(ConversationItem,{conversation:conversation},conversation._id))})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-t border-gray-200 bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600 text-center\",children:[filteredConversations.length,\" conversation\",filteredConversations.length!==1?'s':'',totalUnread>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-orange-600 font-medium\",children:[\"(\",totalUnread,\" unread)\"]})]})})]});};export default ConversationsList;","map":{"version":3,"names":["React","useState","useEffect","motion","MessageCircle","Clock","DollarSign","User","Search","Filter","CheckCircle","AlertCircle","Calendar","MapPin","Star","Bell","BellOff","api","useAuth","toast","jsx","_jsx","jsxs","_jsxs","ConversationsList","_ref","onSelectConversation","selectedJobId","user","conversations","setConversations","loading","setLoading","searchTerm","setSearchTerm","statusFilter","setStatusFilter","totalUnread","setTotalUnread","fetchConversations","interval","setInterval","clearInterval","params","URLSearchParams","append","response","get","data","apiError","_apiError$message","_apiError$message2","console","log","message","includes","warn","sampleConversations","_id","title","jobNumber","status","priority","category","estimatedBudget","location","city","address","customer","role","firstName","lastName","vendor","createdAt","Date","now","toISOString","unreadCount","messageCount","lastMessage","content","messageType","filteredData","filter","conv","reduce","sum","error","filteredConversations","_conv$customer","_conv$customer$firstN","_conv$customer2","_conv$customer2$lastN","_conv$vendor","_conv$vendor$firstNam","_conv$vendor2","_conv$vendor2$lastNam","searchLower","toLowerCase","getStatusColor","colors","PENDING","ASSIGNED","IN_DISCUSSION","QUOTE_SENT","QUOTE_ACCEPTED","PAID","IN_PROGRESS","COMPLETED","CANCELLED","getPriorityIcon","formatRelativeTime","date","messageDate","diffInMinutes","Math","floor","diffInHours","diffInDays","toLocaleDateString","ConversationItem","_ref2","_conversation$locatio","_conversation$estimat","conversation","isSelected","hasUnread","otherParty","div","initial","opacity","y","animate","whileHover","scale","className","onClick","children","replace","toFixed","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","type","value","onChange","e","target","placeholder","length","map"],"sources":["C:/Users/Le520/Documents/Property-Maintainance-Service/src/components/communication/ConversationsList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { \r\n  MessageCircle, \r\n  Clock, \r\n  DollarSign, \r\n  User, \r\n  Search,\r\n  Filter,\r\n  CheckCircle,\r\n  AlertCircle,\r\n  Calendar,\r\n  MapPin,\r\n  Star,\r\n  Bell,\r\n  BellOff\r\n} from 'lucide-react';\r\nimport { api } from '../../services/api';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst ConversationsList = ({ onSelectConversation, selectedJobId }) => {\r\n  const { user } = useAuth();\r\n  const [conversations, setConversations] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('');\r\n  const [totalUnread, setTotalUnread] = useState(0);\r\n\r\n  useEffect(() => {\r\n    fetchConversations();\r\n    // Refresh conversations every 30 seconds\r\n    const interval = setInterval(fetchConversations, 30000);\r\n    return () => clearInterval(interval);\r\n  }, [statusFilter]);\r\n\r\n  const fetchConversations = async () => {\r\n    try {\r\n      const params = new URLSearchParams();\r\n      if (statusFilter) params.append('status', statusFilter);\r\n      \r\n      // Try to fetch from API first\r\n      try {\r\n        const response = await api.get(`/messages/conversations?${params}`);\r\n        setConversations(response.data.conversations);\r\n        setTotalUnread(response.data.totalUnread);\r\n      } catch (apiError) {\r\n        // If API endpoint doesn't exist, use sample data\r\n        console.log('Messages API not available, using sample data');\r\n        \r\n        // Don't show error toast for expected API unavailability\r\n        if (!apiError.message?.includes('404') && !apiError.message?.includes('Network Error')) {\r\n          console.warn('Unexpected API error:', apiError);\r\n        }\r\n        \r\n        // Generate sample conversations based on user role\r\n        const sampleConversations = [\r\n          {\r\n            _id: 'conv_1',\r\n            title: 'Plumbing Repair - Kitchen Sink',\r\n            jobNumber: 'JOB1755221424634BA9G',\r\n            status: 'IN_DISCUSSION',\r\n            priority: 'HIGH',\r\n            category: 'plumbing',\r\n            estimatedBudget: 250,\r\n            location: { city: 'Singapore', address: '123 Main Street' },\r\n            customer: user?.role === 'vendor' ? { firstName: 'John', lastName: 'Smith' } : null,\r\n            vendor: user?.role === 'customer' ? { firstName: 'Mike', lastName: 'Johnson' } : null,\r\n            createdAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(), // 2 hours ago\r\n            unreadCount: 2,\r\n            messageCount: 8,\r\n            lastMessage: {\r\n              content: 'I can fix this today. When would be a good time?',\r\n              createdAt: new Date(Date.now() - 30 * 60 * 1000).toISOString(), // 30 minutes ago\r\n              messageType: 'TEXT'\r\n            }\r\n          },\r\n          {\r\n            _id: 'conv_2',\r\n            title: 'House Cleaning Service',\r\n            jobNumber: 'JOB1755224485804756G',\r\n            status: 'QUOTE_SENT',\r\n            priority: 'MEDIUM',\r\n            category: 'cleaning',\r\n            estimatedBudget: 120,\r\n            location: { city: 'Singapore', address: '456 Oak Avenue' },\r\n            customer: user?.role === 'vendor' ? { firstName: 'Sarah', lastName: 'Wilson' } : null,\r\n            vendor: user?.role === 'customer' ? { firstName: 'Lisa', lastName: 'Chen' } : null,\r\n            createdAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(), // 1 day ago\r\n            unreadCount: 0,\r\n            messageCount: 5,\r\n            lastMessage: {\r\n              content: 'Quote sent: $120 for deep cleaning service',\r\n              createdAt: new Date(Date.now() - 3 * 60 * 60 * 1000).toISOString(), // 3 hours ago\r\n              messageType: 'QUOTE'\r\n            }\r\n          },\r\n          {\r\n            _id: 'conv_3',\r\n            title: 'Electrical Installation',\r\n            jobNumber: 'JOB1755228901234567H',\r\n            status: 'COMPLETED',\r\n            priority: 'MEDIUM',\r\n            category: 'electrical',\r\n            estimatedBudget: 300,\r\n            location: { city: 'Singapore', address: '789 Pine Street' },\r\n            customer: user?.role === 'vendor' ? { firstName: 'David', lastName: 'Brown' } : null,\r\n            vendor: user?.role === 'customer' ? { firstName: 'Alex', lastName: 'Rodriguez' } : null,\r\n            createdAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(), // 3 days ago\r\n            unreadCount: 0,\r\n            messageCount: 12,\r\n            lastMessage: {\r\n              content: 'Thank you for choosing our service! Job completed successfully.',\r\n              createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(), // 2 days ago\r\n              messageType: 'SYSTEM'\r\n            }\r\n          }\r\n        ];\r\n        \r\n        // Filter sample data based on status filter\r\n        const filteredData = statusFilter \r\n          ? sampleConversations.filter(conv => conv.status === statusFilter)\r\n          : sampleConversations;\r\n        \r\n        setConversations(filteredData);\r\n        setTotalUnread(filteredData.reduce((sum, conv) => sum + conv.unreadCount, 0));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching conversations:', error);\r\n      toast.error('Failed to load conversations');\r\n      // Set empty state on complete failure\r\n      setConversations([]);\r\n      setTotalUnread(0);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const filteredConversations = conversations.filter(conv => {\r\n    if (!searchTerm) return true;\r\n    \r\n    const searchLower = searchTerm.toLowerCase();\r\n    return (\r\n      conv.title.toLowerCase().includes(searchLower) ||\r\n      conv.jobNumber.toLowerCase().includes(searchLower) ||\r\n      conv.customer?.firstName?.toLowerCase().includes(searchLower) ||\r\n      conv.customer?.lastName?.toLowerCase().includes(searchLower) ||\r\n      conv.vendor?.firstName?.toLowerCase().includes(searchLower) ||\r\n      conv.vendor?.lastName?.toLowerCase().includes(searchLower)\r\n    );\r\n  });\r\n\r\n  const getStatusColor = (status) => {\r\n    const colors = {\r\n      PENDING: 'bg-yellow-100 text-yellow-800',\r\n      ASSIGNED: 'bg-blue-100 text-blue-800',\r\n      IN_DISCUSSION: 'bg-purple-100 text-purple-800',\r\n      QUOTE_SENT: 'bg-indigo-100 text-indigo-800',\r\n      QUOTE_ACCEPTED: 'bg-green-100 text-green-800',\r\n      PAID: 'bg-emerald-100 text-emerald-800',\r\n      IN_PROGRESS: 'bg-orange-100 text-orange-800',\r\n      COMPLETED: 'bg-green-200 text-green-900',\r\n      CANCELLED: 'bg-red-100 text-red-800'\r\n    };\r\n    return colors[status] || 'bg-gray-100 text-gray-800';\r\n  };\r\n\r\n  const getPriorityIcon = (priority) => {\r\n    if (priority === 'EMERGENCY') return 'ðŸš¨';\r\n    if (priority === 'HIGH') return 'ðŸ”´';\r\n    if (priority === 'MEDIUM') return 'ðŸŸ¡';\r\n    return 'ðŸŸ¢';\r\n  };\r\n\r\n  const formatRelativeTime = (date) => {\r\n    const now = new Date();\r\n    const messageDate = new Date(date);\r\n    const diffInMinutes = Math.floor((now - messageDate) / (1000 * 60));\r\n    \r\n    if (diffInMinutes < 1) return 'Just now';\r\n    if (diffInMinutes < 60) return `${diffInMinutes}m ago`;\r\n    \r\n    const diffInHours = Math.floor(diffInMinutes / 60);\r\n    if (diffInHours < 24) return `${diffInHours}h ago`;\r\n    \r\n    const diffInDays = Math.floor(diffInHours / 24);\r\n    if (diffInDays < 7) return `${diffInDays}d ago`;\r\n    \r\n    return messageDate.toLocaleDateString();\r\n  };\r\n\r\n  const ConversationItem = ({ conversation }) => {\r\n    const isSelected = selectedJobId === conversation._id;\r\n    const hasUnread = conversation.unreadCount > 0;\r\n    const otherParty = user?.role === 'vendor' ? conversation.customer : conversation.vendor;\r\n    \r\n    return (\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        whileHover={{ scale: 1.02 }}\r\n        className={`cursor-pointer p-4 border-b border-gray-200 hover:bg-gray-50 ${\r\n          isSelected ? 'bg-orange-50 border-orange-200' : ''\r\n        }`}\r\n        onClick={() => onSelectConversation(conversation)}\r\n      >\r\n        <div className=\"flex items-start space-x-3\">\r\n          {/* Avatar */}\r\n          <div className={`w-10 h-10 rounded-full flex items-center justify-center ${\r\n            otherParty ? 'bg-gray-200' : 'bg-orange-200'\r\n          }`}>\r\n            <User className=\"w-5 h-5 text-gray-600\" />\r\n          </div>\r\n          \r\n          {/* Content */}\r\n          <div className=\"flex-1 min-w-0\">\r\n            <div className=\"flex items-center justify-between mb-1\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <h3 className=\"text-sm font-medium text-gray-900 truncate\">\r\n                  {conversation.title}\r\n                </h3>\r\n                {hasUnread && (\r\n                  <div className=\"w-2 h-2 bg-orange-500 rounded-full\"></div>\r\n                )}\r\n              </div>\r\n              <div className=\"flex items-center space-x-1\">\r\n                {conversation.priority !== 'NORMAL' && (\r\n                  <span className=\"text-xs\">\r\n                    {getPriorityIcon(conversation.priority)}\r\n                  </span>\r\n                )}\r\n                <span className=\"text-xs text-gray-500\">\r\n                  {conversation.lastMessage ? \r\n                    formatRelativeTime(conversation.lastMessage.createdAt) : \r\n                    formatRelativeTime(conversation.createdAt)\r\n                  }\r\n                </span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <div className=\"text-xs text-gray-600\">\r\n                <span className=\"font-medium\">{conversation.jobNumber}</span>\r\n                {otherParty && (\r\n                  <span className=\"ml-2\">\r\n                    with {otherParty.firstName} {otherParty.lastName}\r\n                  </span>\r\n                )}\r\n              </div>\r\n              <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(conversation.status)}`}>\r\n                {conversation.status.replace('_', ' ')}\r\n              </span>\r\n            </div>\r\n            \r\n            {/* Last Message Preview */}\r\n            {conversation.lastMessage && (\r\n              <div className=\"text-sm text-gray-600 truncate\">\r\n                {conversation.lastMessage.messageType === 'QUOTE' && 'ðŸ’°'}\r\n                {conversation.lastMessage.messageType === 'CONTACT_INFO' && 'ðŸ“ž'}\r\n                {conversation.lastMessage.messageType === 'SYSTEM' && 'ðŸ¤–'}\r\n                <span className=\"ml-1\">\r\n                  {conversation.lastMessage.content}\r\n                </span>\r\n              </div>\r\n            )}\r\n            \r\n            {/* Job Details */}\r\n            <div className=\"flex items-center justify-between mt-2 text-xs text-gray-500\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"flex items-center\">\r\n                  <MapPin className=\"w-3 h-3 mr-1\" />\r\n                  {conversation.location?.city}\r\n                </div>\r\n                <div className=\"flex items-center\">\r\n                  <DollarSign className=\"w-3 h-3 mr-1\" />\r\n                  ${conversation.estimatedBudget?.toFixed(0)}\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-2\">\r\n                {conversation.messageCount > 0 && (\r\n                  <span className=\"flex items-center\">\r\n                    <MessageCircle className=\"w-3 h-3 mr-1\" />\r\n                    {conversation.messageCount}\r\n                  </span>\r\n                )}\r\n                {hasUnread && (\r\n                  <span className=\"bg-orange-500 text-white px-2 py-1 rounded-full text-xs\">\r\n                    {conversation.unreadCount}\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col\">\r\n      {/* Header */}\r\n      <div className=\"p-4 border-b border-gray-200\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h2 className=\"text-lg font-semibold text-gray-900\">\r\n            Messages\r\n            {totalUnread > 0 && (\r\n              <span className=\"ml-2 bg-orange-500 text-white px-2 py-1 rounded-full text-xs\">\r\n                {totalUnread}\r\n              </span>\r\n            )}\r\n          </h2>\r\n          <button\r\n            onClick={fetchConversations}\r\n            className=\"text-orange-600 hover:text-orange-800\"\r\n          >\r\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n        \r\n        {/* Search */}\r\n        <div className=\"relative mb-3\">\r\n          <Search className=\"absolute left-3 top-3 w-4 h-4 text-gray-400\" />\r\n          <input\r\n            type=\"text\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            placeholder=\"Search conversations...\"\r\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"\r\n          />\r\n        </div>\r\n        \r\n        {/* Status Filter */}\r\n        <select\r\n          value={statusFilter}\r\n          onChange={(e) => setStatusFilter(e.target.value)}\r\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"\r\n        >\r\n          <option value=\"\">All Statuses</option>\r\n          <option value=\"PENDING\">Pending</option>\r\n          <option value=\"ASSIGNED\">Assigned</option>\r\n          <option value=\"IN_DISCUSSION\">In Discussion</option>\r\n          <option value=\"QUOTE_SENT\">Quote Sent</option>\r\n          <option value=\"QUOTE_ACCEPTED\">Quote Accepted</option>\r\n          <option value=\"PAID\">Paid</option>\r\n          <option value=\"IN_PROGRESS\">In Progress</option>\r\n          <option value=\"COMPLETED\">Completed</option>\r\n        </select>\r\n      </div>\r\n      \r\n      {/* Conversations List */}\r\n      <div className=\"flex-1 overflow-y-auto\">\r\n        {filteredConversations.length === 0 ? (\r\n          <div className=\"text-center py-8 text-gray-500\">\r\n            <MessageCircle className=\"w-12 h-12 mx-auto mb-4 text-gray-300\" />\r\n            <p>No conversations found</p>\r\n            {searchTerm && (\r\n              <p className=\"text-sm mt-2\">Try adjusting your search terms</p>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div className=\"divide-y divide-gray-200\">\r\n            {filteredConversations.map((conversation) => (\r\n              <ConversationItem\r\n                key={conversation._id}\r\n                conversation={conversation}\r\n              />\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      {/* Footer Stats */}\r\n      <div className=\"p-4 border-t border-gray-200 bg-gray-50\">\r\n        <div className=\"text-xs text-gray-600 text-center\">\r\n          {filteredConversations.length} conversation{filteredConversations.length !== 1 ? 's' : ''}\r\n          {totalUnread > 0 && (\r\n            <span className=\"ml-2 text-orange-600 font-medium\">\r\n              ({totalUnread} unread)\r\n            </span>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConversationsList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}