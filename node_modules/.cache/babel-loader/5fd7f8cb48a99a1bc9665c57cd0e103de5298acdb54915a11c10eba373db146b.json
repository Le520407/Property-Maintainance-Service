{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useNavigate,useLocation}from'react-router-dom';import{motion}from'framer-motion';import{MapPin,Calendar,Clock,DollarSign,FileText,Phone,Mail,Camera,AlertCircle,CheckCircle,Upload,Video,X}from'lucide-react';import{api}from'../services/api';import{useAuth}from'../contexts/AuthContext';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const OrderSubmissionPage=()=>{var _serviceCategories$fi,_serviceCategories$fi2;const navigate=useNavigate();const location=useLocation();const{user}=useAuth();const[loading,setLoading]=useState(false);const[currentStep,setCurrentStep]=useState(1);const hasShownPrefilledToast=useRef(false);const[formData,setFormData]=useState({// Service Details\ntitle:'',description:'',category:'',priority:'MEDIUM',isEmergency:false,// Location\nlocation:{streetAddress:'',building:'',unit:'',city:'',state:'',zipCode:'',address:''// Keep for backward compatibility\n},// Timing\nrequestedTimeSlot:{date:'',startTime:'09:00',endTime:'17:00'},estimatedDuration:2,// Budget\nestimatedBudget:'',// Contact & Special Instructions\ncustomerContactNumber:(user===null||user===void 0?void 0:user.phone)||'',specialInstructions:'',accessInstructions:'',// Attachments\nimages:[],videos:[]});// Handle pre-filled data from service detail page and auto-fill address\nuseEffect(()=>{var _location$state;if((_location$state=location.state)!==null&&_location$state!==void 0&&_location$state.prefilledData&&!hasShownPrefilledToast.current){const{prefilledData}=location.state;// Map categories that don't exist in backend to valid ones\nconst categoryMapping={'maintenance':'general'// Map maintenance to general since backend doesn't accept maintenance\n};const mappedCategory=categoryMapping[prefilledData.category]||prefilledData.category;setFormData(prev=>{var _prefilledData$estima;return{...prev,title:prefilledData.title||prev.title,category:mappedCategory||prev.category,description:prefilledData.description||prev.description,estimatedBudget:((_prefilledData$estima=prefilledData.estimatedBudget)===null||_prefilledData$estima===void 0?void 0:_prefilledData$estima.toString())||prev.estimatedBudget};});// Show success message only once\ntoast.success(`Pre-filled with ${prefilledData.title} service details`);hasShownPrefilledToast.current=true;}// Auto-fill address from user profile on component mount\nif(user&&user.address){setFormData(prev=>({...prev,location:{...prev.location,streetAddress:user.address||prev.location.streetAddress,city:user.city||prev.location.city,state:user.state||prev.location.state,zipCode:user.zipCode||prev.location.zipCode,address:user.address||prev.location.address// For backward compatibility\n}}));}},[location.state,user]);const serviceCategories=[{value:'plumbing',label:'Plumbing',icon:'🔧'},{value:'electrical',label:'Electrical',icon:'⚡'},{value:'cleaning',label:'Cleaning',icon:'🧽'},{value:'gardening',label:'Gardening',icon:'🌱'},{value:'painting',label:'Painting',icon:'🎨'},{value:'security',label:'Security',icon:'🔒'},{value:'hvac',label:'HVAC',icon:'🌡️'},{value:'general',label:'General Maintenance',icon:'🛠️'}];const handleInputChange=(field,value)=>{// Prevent selecting past dates\nif(field==='requestedTimeSlot.date'){const selectedDate=new Date(value);const today=new Date();today.setHours(0,0,0,0);// Reset time to start of day for comparison\nif(selectedDate<today){toast.error('Cannot select a date in the past. Please choose today or a future date.');return;}}if(field.includes('.')){const[parent,child]=field.split('.');setFormData(prev=>({...prev,[parent]:{...prev[parent],[child]:value}}));}else{setFormData(prev=>({...prev,[field]:value}));}};const handleFileUpload=(e,type)=>{const files=Array.from(e.target.files);files.forEach(file=>{// File size validation\nconst maxSize=type==='images'?10*1024*1024:50*1024*1024;// 10MB for images, 50MB for videos\nif(file.size>maxSize){toast.error(`File ${file.name} is too large. Maximum size is ${type==='images'?'10MB':'50MB'}.`);return;}// Create preview URL\nconst reader=new FileReader();reader.onload=event=>{const fileData={file:file,preview:event.target.result,name:file.name,size:file.size};setFormData(prev=>({...prev,[type]:[...prev[type],fileData]}));};reader.readAsDataURL(file);});if(files.length>0){toast.success(`${files.length} ${type==='images'?'image(s)':'video(s)'} uploaded successfully`);}};const removeFile=(index,type)=>{setFormData(prev=>({...prev,[type]:prev[type].filter((_,i)=>i!==index)}));toast.success(`${type==='images'?'Image':'Video'} removed successfully`);};const validateStep=step=>{switch(step){case 1:return formData.title&&formData.description&&formData.category;case 2:return formData.location.streetAddress&&formData.location.city&&formData.location.zipCode;case 3:return formData.requestedTimeSlot.date;case 4:return formData.estimatedBudget;default:return true;}};const nextStep=()=>{if(validateStep(currentStep)){setCurrentStep(prev=>Math.min(prev+1,5));}else{toast.error('Please fill in all required fields');}};const prevStep=()=>{setCurrentStep(prev=>Math.max(prev-1,1));};const handleSubmit=async e=>{e.preventDefault();if(!user){toast.error('Please login to submit an order');navigate('/login');return;}try{var _response$job,_response$job2;setLoading(true);// Generate a unique job number\nconst jobNumber=`JOB${Date.now()}${Math.random().toString(36).substr(2,4).toUpperCase()}`;const budgetAmount=parseFloat(formData.estimatedBudget);// Create complete address string for backend compatibility\nconst completeAddress=[formData.location.unit&&`Unit ${formData.location.unit}`,formData.location.building,formData.location.streetAddress,formData.location.zipCode&&formData.location.city&&`${formData.location.zipCode} ${formData.location.city}`,formData.location.state].filter(Boolean).join(', ');// Prepare the order data\nconst orderData={...formData,customerId:user.id||user._id,jobNumber:jobNumber,estimatedBudget:budgetAmount,subtotal:budgetAmount,totalAmount:budgetAmount,// Initial estimate\nlocation:{...formData.location,address:completeAddress||formData.location.streetAddress// Ensure backward compatibility\n},items:[{serviceName:formData.title,category:formData.category,description:formData.description,quantity:1,unitPrice:budgetAmount,totalPrice:budgetAmount}]};const response=await api.jobs.create(orderData);toast.success('Order submitted successfully! 🎉');toast.success('Our admin will review and assign it to the best vendor in your area.');// Redirect to order tracking or dashboard\nnavigate('/dashboard',{state:{message:'Order submitted successfully!',orderId:((_response$job=response.job)===null||_response$job===void 0?void 0:_response$job._id)||((_response$job2=response.job)===null||_response$job2===void 0?void 0:_response$job2.id)}});}catch(error){var _error$response2,_error$response2$data;console.error('Order submission error:',error);// More detailed error handling\nlet errorMessage='Failed to submit order';if(error.message.includes('401')){errorMessage='Authentication required. Please log in again.';}else if(error.message.includes('400')){var _error$response,_error$response$data;errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Invalid request data';}else if(error.message.includes('500')){errorMessage='Server error. Please try again later.';}else if((_error$response2=error.response)!==null&&_error$response2!==void 0&&(_error$response2$data=_error$response2.data)!==null&&_error$response2$data!==void 0&&_error$response2$data.message){errorMessage=error.response.data.message;}toast.error(errorMessage);}finally{setLoading(false);}};const steps=[{number:1,title:'Service Details',icon:FileText},{number:2,title:'Location',icon:MapPin},{number:3,title:'Timing',icon:Calendar},{number:4,title:'Budget',icon:DollarSign},{number:5,title:'Review & Submit',icon:CheckCircle}];return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-4\",children:\"Submit Service Request\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-600\",children:\"Tell us what you need, and we'll connect you with the best professionals\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:steps.map((step,index)=>{const Icon=step.icon;const isActive=currentStep===step.number;const isCompleted=currentStep>step.number;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 ${isCompleted?'bg-green-500 border-green-500 text-white':isActive?'bg-orange-500 border-orange-500 text-white':'bg-white border-gray-300 text-gray-400'}`,children:/*#__PURE__*/_jsx(Icon,{size:20})}),/*#__PURE__*/_jsx(\"span\",{className:`mt-2 text-sm ${isActive?'text-orange-600 font-medium':'text-gray-500'}`,children:step.title}),index<steps.length-1&&/*#__PURE__*/_jsx(\"div\",{className:`hidden md:block w-full h-0.5 mt-5 ${isCompleted?'bg-green-500':'bg-gray-300'}`,style:{position:'absolute',left:'50%',width:'calc(100% - 40px)',zIndex:-1}})]},step.number);})})}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:\"bg-white rounded-lg shadow-lg p-6 mb-6\",children:[currentStep===1&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-900 mb-4\",children:\"What service do you need?\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Service Title *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.title,onChange:e=>handleInputChange('title',e.target.value),placeholder:\"e.g., Fix leaking kitchen faucet\",className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Service Category *\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-3\",children:serviceCategories.map(category=>/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>handleInputChange('category',category.value),className:`p-4 border rounded-lg text-center transition-colors ${formData.category===category.value?'border-orange-500 bg-orange-50 text-orange-700':'border-gray-300 hover:border-gray-400'}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl mb-2\",children:category.icon}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium\",children:category.label})]},category.value))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Detailed Description *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-sm font-medium text-blue-800 mb-2\",children:[\"\\uD83D\\uDCDD What to include for \",formData.category==='general'?'General Maintenance':((_serviceCategories$fi=serviceCategories.find(c=>c.value===formData.category))===null||_serviceCategories$fi===void 0?void 0:_serviceCategories$fi.label)||'your',\" services:\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-blue-700\",children:formData.category==='general'?/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Please describe the maintenance work needed\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Type of repair or maintenance required\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Location and extent of work\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Current condition or problem\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Any safety concerns\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Timeline requirements\"})]}):/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Specific problem or issue you're experiencing\"}),/*#__PURE__*/_jsx(\"li\",{children:\"When the problem started\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Location and extent of the issue\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Any attempted fixes or troubleshooting\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Safety concerns (if any)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Preferred timeline\"})]})})]}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.description,onChange:e=>handleInputChange('description',e.target.value),rows:6,placeholder:\"Professional carpentry and woodwork services with custom solutions, quality materials, and expert craftsmanship for all your woodworking needs.\",className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Add Photos & Videos (Optional)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Help us understand the issue better by uploading photos or videos.\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(Camera,{className:\"inline w-4 h-4 mr-1\"}),\"Photos\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-orange-400 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",multiple:true,accept:\"image/*\",onChange:e=>handleFileUpload(e,'images'),className:\"hidden\",id:\"photo-upload\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"photo-upload\",className:\"cursor-pointer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Camera,{className:\"mx-auto h-8 w-8 text-gray-400 mb-2\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-orange-600\",children:\"Click to upload\"}),\" or drag and drop\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"PNG, JPG, GIF up to 10MB each\"})]})})]}),formData.images.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4\",children:formData.images.map((image,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:image.preview,alt:`Preview ${index+1}`,className:\"w-full h-20 object-cover rounded-lg\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeFile(index,'images'),className:\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600\",children:/*#__PURE__*/_jsx(X,{className:\"w-3 h-3\"})})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(Video,{className:\"inline w-4 h-4 mr-1\"}),\"Videos\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-orange-400 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",multiple:true,accept:\"video/*\",onChange:e=>handleFileUpload(e,'videos'),className:\"hidden\",id:\"video-upload\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"video-upload\",className:\"cursor-pointer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Video,{className:\"mx-auto h-8 w-8 text-gray-400 mb-2\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-orange-600\",children:\"Click to upload\"}),\" or drag and drop\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"MP4, WebM, MOV up to 50MB each\"})]})})]}),formData.videos.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\",children:formData.videos.map((video,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"video\",{src:video.preview,className:\"w-full h-32 object-cover rounded-lg\",controls:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeFile(index,'videos'),className:\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600\",children:/*#__PURE__*/_jsx(X,{className:\"w-3 h-3\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded\",children:video.file.name})]},index))})]})]})]}),currentStep===2&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-900 mb-4\",children:\"Where is the service needed?\"}),(user===null||user===void 0?void 0:user.address)&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5 text-green-500 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-green-800\",children:\"Address auto-filled from your profile!\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-green-600\",children:\"We've pre-filled your saved address. You can edit it below if needed, or update your profile address for future orders.\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{// Auto-fill from user profile\nif(user.address){handleInputChange('location.streetAddress',user.address);handleInputChange('location.address',user.address);// For backward compatibility\n}if(user.city){handleInputChange('location.city',user.city);}if(user.state){handleInputChange('location.state',user.state);}if(user.zipCode){handleInputChange('location.zipCode',user.zipCode);}toast.success('Address auto-filled from your profile');},className:\"ml-3 text-sm text-green-600 hover:text-green-800 underline\",children:\"Manage Profile \\u2192\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Street Address *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.location.streetAddress,onChange:e=>handleInputChange('location.streetAddress',e.target.value),placeholder:\"e.g., Jalan Permas 16/1\",className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"City/Area *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.location.city,onChange:e=>handleInputChange('location.city',e.target.value),placeholder:\"e.g., Masai\",className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"State *\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.location.state,onChange:e=>handleInputChange('location.state',e.target.value),className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select State\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Johor\",children:\"Johor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Kedah\",children:\"Kedah\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Kelantan\",children:\"Kelantan\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Kuala Lumpur\",children:\"Kuala Lumpur\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Labuan\",children:\"Labuan\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Melaka\",children:\"Melaka\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Negeri Sembilan\",children:\"Negeri Sembilan\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pahang\",children:\"Pahang\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Penang\",children:\"Penang\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Perak\",children:\"Perak\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Perlis\",children:\"Perlis\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Putrajaya\",children:\"Putrajaya\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Sabah\",children:\"Sabah\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Sarawak\",children:\"Sarawak\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Selangor\",children:\"Selangor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Terengganu\",children:\"Terengganu\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Postal Code *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.location.zipCode,onChange:e=>handleInputChange('location.zipCode',e.target.value),placeholder:\"e.g., 81750\",className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Full Address Preview\"}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700\",children:[formData.location.unit&&`Unit ${formData.location.unit}`,formData.location.building,formData.location.streetAddress,formData.location.zipCode&&formData.location.city&&`${formData.location.zipCode} ${formData.location.city}`,formData.location.state].filter(Boolean).join(', ')||'Address will appear here as you fill in the fields above'})]})]})]}),currentStep===3&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-900 mb-4\",children:\"When do you need this service?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Preferred Date *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:formData.requestedTimeSlot.date,onChange:e=>handleInputChange('requestedTimeSlot.date',e.target.value),min:new Date().toISOString().split('T')[0],className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Please select from today onwards to allow proper scheduling\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-3\",children:\"Preferred Time Session\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"timeSession\",value:\"morning\",checked:formData.requestedTimeSlot.startTime==='08:00'&&formData.requestedTimeSlot.endTime==='12:00',onChange:()=>{handleInputChange('requestedTimeSlot.startTime','08:00');handleInputChange('requestedTimeSlot.endTime','12:00');},className:\"mr-3 text-orange-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:\"Morning Session\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"8:00 AM - 12:00 PM\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-400\",children:\"Good for most services and appointments\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"timeSession\",value:\"afternoon\",checked:formData.requestedTimeSlot.startTime==='12:00'&&formData.requestedTimeSlot.endTime==='16:00',onChange:()=>{handleInputChange('requestedTimeSlot.startTime','12:00');handleInputChange('requestedTimeSlot.endTime','16:00');},className:\"mr-3 text-orange-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:\"Afternoon Session\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"12:00 PM - 4:00 PM\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-400\",children:\"Good for most services and appointments\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"timeSession\",value:\"evening\",checked:formData.requestedTimeSlot.startTime==='16:00'&&formData.requestedTimeSlot.endTime==='20:00',onChange:()=>{handleInputChange('requestedTimeSlot.startTime','16:00');handleInputChange('requestedTimeSlot.endTime','20:00');},className:\"mr-3 text-orange-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:\"Evening Session\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"4:00 PM - 8:00 PM\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-400\",children:\"Perfect for after work hours\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"timeSession\",value:\"flexible\",checked:formData.requestedTimeSlot.startTime==='09:00'&&formData.requestedTimeSlot.endTime==='17:00',onChange:()=>{handleInputChange('requestedTimeSlot.startTime','09:00');handleInputChange('requestedTimeSlot.endTime','17:00');},className:\"mr-3 text-orange-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:\"Flexible Timing\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Any time during business hours\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-400\",children:\"Let vendor choose the best time\"})]})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-5 w-5 text-blue-400 mr-2 mt-0.5\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-blue-700\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:\"}),\" These are your preferred times. The vendor will contact you to confirm the final schedule after assignment.\"]})]})})]}),currentStep===4&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-900 mb-4\",children:\"What's your budget estimate?\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Estimated Budget (SGD) *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"absolute left-3 top-3 text-gray-500\",children:\"$\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:formData.estimatedBudget,onChange:e=>handleInputChange('estimatedBudget',e.target.value),placeholder:\"0.00\",min:\"0\",step:\"0.01\",className:\"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-600\",children:\"This is just an estimate. The vendor will provide an exact quote after reviewing your requirements.\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Contact Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:formData.customerContactNumber,onChange:e=>handleInputChange('customerContactNumber',e.target.value),placeholder:\"Phone number for vendor to contact you\",className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Special Instructions\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.specialInstructions,onChange:e=>handleInputChange('specialInstructions',e.target.value),rows:4,placeholder:\"Any specific requirements, preferences, or important details the vendor should know...\",className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Photos (Optional)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",multiple:true,accept:\"image/*\",onChange:e=>handleFileUpload(e,'images'),className:\"hidden\",id:\"image-upload\"}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"image-upload\",className:\"cursor-pointer\",children:[/*#__PURE__*/_jsx(Upload,{className:\"mx-auto h-12 w-12 text-gray-400 mb-4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-medium text-gray-700\",children:\"Upload Photos\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Help vendors understand your needs better\"})]})]}),formData.images.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:\"Uploaded Images:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:formData.images.map((image,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-2 bg-gray-50 rounded\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:image}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeFile(index,'images'),className:\"text-red-600 hover:text-red-800\",children:\"Remove\"})]},index))})]})]})]}),currentStep===5&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-900 mb-4\",children:\"Review Your Request\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-3\",children:\"Service Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Title:\"}),\" \",formData.title]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category:\"}),\" \",(_serviceCategories$fi2=serviceCategories.find(c=>c.value===formData.category))===null||_serviceCategories$fi2===void 0?void 0:_serviceCategories$fi2.label]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",formData.description]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-3\",children:\"Service Location\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm space-y-1\",children:[formData.location.unit&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Unit:\"}),\" \",formData.location.unit]}),formData.location.building&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Building:\"}),\" \",formData.location.building]}),formData.location.streetAddress&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Street:\"}),\" \",formData.location.streetAddress]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Area:\"}),\" \",formData.location.city,\", \",formData.location.state,\" \",formData.location.zipCode]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-3\",children:\"Preferred Schedule\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",formData.requestedTimeSlot.date]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Time:\"}),\" \",formData.requestedTimeSlot.startTime,\" - \",formData.requestedTimeSlot.endTime]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Duration:\"}),\" \",formData.estimatedDuration,\" hours\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-3\",children:\"Budget Estimate\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-semibold text-orange-600\",children:[\"$\",parseFloat(formData.estimatedBudget||0).toFixed(2),\" SGD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-blue-900 mb-3\",children:\"What happens next?\"}),/*#__PURE__*/_jsxs(\"ol\",{className:\"list-decimal list-inside space-y-2 text-sm text-blue-800\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Our admin will review your request within 2 hours\"}),/*#__PURE__*/_jsx(\"li\",{children:\"We'll assign the best-rated vendor in your area\"}),/*#__PURE__*/_jsx(\"li\",{children:\"The vendor will contact you directly to discuss details\"}),/*#__PURE__*/_jsx(\"li\",{children:\"You'll receive a detailed quote for approval\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Once approved, you can pay securely through our platform\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Work begins as scheduled!\"})]})]})]})]})]},currentStep),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[currentStep>1?/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:prevStep,className:\"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\",children:\"Previous\"}):/*#__PURE__*/_jsx(\"div\",{}),currentStep<5?/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:nextStep,disabled:!validateStep(currentStep),className:\"px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",children:\"Next\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:loading,className:\"px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"}),\"Submitting...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5 mr-2\"}),\"Submit Request\"]})})]})]})});};export default OrderSubmissionPage;","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","useLocation","motion","MapPin","Calendar","Clock","DollarSign","FileText","Phone","Mail","Camera","AlertCircle","CheckCircle","Upload","Video","X","api","useAuth","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OrderSubmissionPage","_serviceCategories$fi","_serviceCategories$fi2","navigate","location","user","loading","setLoading","currentStep","setCurrentStep","hasShownPrefilledToast","formData","setFormData","title","description","category","priority","isEmergency","streetAddress","building","unit","city","state","zipCode","address","requestedTimeSlot","date","startTime","endTime","estimatedDuration","estimatedBudget","customerContactNumber","phone","specialInstructions","accessInstructions","images","videos","_location$state","prefilledData","current","categoryMapping","mappedCategory","prev","_prefilledData$estima","toString","success","serviceCategories","value","label","icon","handleInputChange","field","selectedDate","Date","today","setHours","error","includes","parent","child","split","handleFileUpload","e","type","files","Array","from","target","forEach","file","maxSize","size","name","reader","FileReader","onload","event","fileData","preview","result","readAsDataURL","length","removeFile","index","filter","_","i","validateStep","step","nextStep","Math","min","prevStep","max","handleSubmit","preventDefault","_response$job","_response$job2","jobNumber","now","random","substr","toUpperCase","budgetAmount","parseFloat","completeAddress","Boolean","join","orderData","customerId","id","_id","subtotal","totalAmount","items","serviceName","quantity","unitPrice","totalPrice","response","jobs","create","message","orderId","job","_error$response2","_error$response2$data","console","errorMessage","_error$response","_error$response$data","data","steps","number","className","children","map","Icon","isActive","isCompleted","style","position","left","width","zIndex","div","initial","opacity","x","animate","exit","onChange","placeholder","onClick","find","c","rows","multiple","accept","htmlFor","image","src","alt","video","controls","toISOString","checked","toFixed","disabled"],"sources":["C:/Users/Le520/Documents/Property-Maintainance-Service/src/pages/OrderSubmissionPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport { \r\n  MapPin, \r\n  Calendar, \r\n  Clock, \r\n  DollarSign, \r\n  FileText, \r\n  Phone, \r\n  Mail,\r\n  Camera,\r\n  AlertCircle,\r\n  CheckCircle,\r\n  Upload,\r\n  Video,\r\n  X\r\n} from 'lucide-react';\r\nimport { api } from '../services/api';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst OrderSubmissionPage = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { user } = useAuth();\r\n  const [loading, setLoading] = useState(false);\r\n  const [currentStep, setCurrentStep] = useState(1);\r\n  const hasShownPrefilledToast = useRef(false);\r\n  const [formData, setFormData] = useState({\r\n    // Service Details\r\n    title: '',\r\n    description: '',\r\n    category: '',\r\n    priority: 'MEDIUM',\r\n    isEmergency: false,\r\n    \r\n    // Location\r\n    location: {\r\n      streetAddress: '',\r\n      building: '',\r\n      unit: '',\r\n      city: '',\r\n      state: '',\r\n      zipCode: '',\r\n      address: '', // Keep for backward compatibility\r\n    },\r\n    \r\n    // Timing\r\n    requestedTimeSlot: {\r\n      date: '',\r\n      startTime: '09:00',\r\n      endTime: '17:00'\r\n    },\r\n    estimatedDuration: 2,\r\n    \r\n    // Budget\r\n    estimatedBudget: '',\r\n    \r\n    // Contact & Special Instructions\r\n    customerContactNumber: user?.phone || '',\r\n    specialInstructions: '',\r\n    accessInstructions: '',\r\n    \r\n    // Attachments\r\n    images: [],\r\n    videos: []\r\n  });\r\n\r\n  // Handle pre-filled data from service detail page and auto-fill address\r\n  useEffect(() => {\r\n    if (location.state?.prefilledData && !hasShownPrefilledToast.current) {\r\n      const { prefilledData } = location.state;\r\n      \r\n      // Map categories that don't exist in backend to valid ones\r\n      const categoryMapping = {\r\n        'maintenance': 'general', // Map maintenance to general since backend doesn't accept maintenance\r\n      };\r\n      \r\n      const mappedCategory = categoryMapping[prefilledData.category] || prefilledData.category;\r\n      \r\n      setFormData(prev => ({\r\n        ...prev,\r\n        title: prefilledData.title || prev.title,\r\n        category: mappedCategory || prev.category,\r\n        description: prefilledData.description || prev.description,\r\n        estimatedBudget: prefilledData.estimatedBudget?.toString() || prev.estimatedBudget\r\n      }));\r\n      \r\n      // Show success message only once\r\n      toast.success(`Pre-filled with ${prefilledData.title} service details`);\r\n      hasShownPrefilledToast.current = true;\r\n    }\r\n\r\n    // Auto-fill address from user profile on component mount\r\n    if (user && user.address) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        location: {\r\n          ...prev.location,\r\n          streetAddress: user.address || prev.location.streetAddress,\r\n          city: user.city || prev.location.city,\r\n          state: user.state || prev.location.state,\r\n          zipCode: user.zipCode || prev.location.zipCode,\r\n          address: user.address || prev.location.address, // For backward compatibility\r\n        }\r\n      }));\r\n    }\r\n  }, [location.state, user]);\r\n\r\n  const serviceCategories = [\r\n    { value: 'plumbing', label: 'Plumbing', icon: '🔧' },\r\n    { value: 'electrical', label: 'Electrical', icon: '⚡' },\r\n    { value: 'cleaning', label: 'Cleaning', icon: '🧽' },\r\n    { value: 'gardening', label: 'Gardening', icon: '🌱' },\r\n    { value: 'painting', label: 'Painting', icon: '🎨' },\r\n    { value: 'security', label: 'Security', icon: '🔒' },\r\n    { value: 'hvac', label: 'HVAC', icon: '🌡️' },\r\n    { value: 'general', label: 'General Maintenance', icon: '🛠️' }\r\n  ];\r\n\r\n\r\n  const handleInputChange = (field, value) => {\r\n    // Prevent selecting past dates\r\n    if (field === 'requestedTimeSlot.date') {\r\n      const selectedDate = new Date(value);\r\n      const today = new Date();\r\n      today.setHours(0, 0, 0, 0); // Reset time to start of day for comparison\r\n      \r\n      if (selectedDate < today) {\r\n        toast.error('Cannot select a date in the past. Please choose today or a future date.');\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (field.includes('.')) {\r\n      const [parent, child] = field.split('.');\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [parent]: {\r\n          ...prev[parent],\r\n          [child]: value\r\n        }\r\n      }));\r\n    } else {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: value\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = (e, type) => {\r\n    const files = Array.from(e.target.files);\r\n    \r\n    files.forEach(file => {\r\n      // File size validation\r\n      const maxSize = type === 'images' ? 10 * 1024 * 1024 : 50 * 1024 * 1024; // 10MB for images, 50MB for videos\r\n      if (file.size > maxSize) {\r\n        toast.error(`File ${file.name} is too large. Maximum size is ${type === 'images' ? '10MB' : '50MB'}.`);\r\n        return;\r\n      }\r\n\r\n      // Create preview URL\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        const fileData = {\r\n          file: file,\r\n          preview: event.target.result,\r\n          name: file.name,\r\n          size: file.size\r\n        };\r\n\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          [type]: [...prev[type], fileData]\r\n        }));\r\n      };\r\n      reader.readAsDataURL(file);\r\n    });\r\n\r\n    if (files.length > 0) {\r\n      toast.success(`${files.length} ${type === 'images' ? 'image(s)' : 'video(s)'} uploaded successfully`);\r\n    }\r\n  };\r\n\r\n  const removeFile = (index, type) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [type]: prev[type].filter((_, i) => i !== index)\r\n    }));\r\n    toast.success(`${type === 'images' ? 'Image' : 'Video'} removed successfully`);\r\n  };\r\n\r\n  const validateStep = (step) => {\r\n    switch (step) {\r\n      case 1:\r\n        return formData.title && formData.description && formData.category;\r\n      case 2:\r\n        return formData.location.streetAddress && formData.location.city && formData.location.zipCode;\r\n      case 3:\r\n        return formData.requestedTimeSlot.date;\r\n      case 4:\r\n        return formData.estimatedBudget;\r\n      default:\r\n        return true;\r\n    }\r\n  };\r\n\r\n  const nextStep = () => {\r\n    if (validateStep(currentStep)) {\r\n      setCurrentStep(prev => Math.min(prev + 1, 5));\r\n    } else {\r\n      toast.error('Please fill in all required fields');\r\n    }\r\n  };\r\n\r\n  const prevStep = () => {\r\n    setCurrentStep(prev => Math.max(prev - 1, 1));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!user) {\r\n      toast.error('Please login to submit an order');\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Generate a unique job number\r\n      const jobNumber = `JOB${Date.now()}${Math.random().toString(36).substr(2, 4).toUpperCase()}`;\r\n      const budgetAmount = parseFloat(formData.estimatedBudget);\r\n      \r\n      // Create complete address string for backend compatibility\r\n      const completeAddress = [\r\n        formData.location.unit && `Unit ${formData.location.unit}`,\r\n        formData.location.building,\r\n        formData.location.streetAddress,\r\n        formData.location.zipCode && formData.location.city && `${formData.location.zipCode} ${formData.location.city}`,\r\n        formData.location.state\r\n      ].filter(Boolean).join(', ');\r\n\r\n      // Prepare the order data\r\n      const orderData = {\r\n        ...formData,\r\n        customerId: user.id || user._id,\r\n        jobNumber: jobNumber,\r\n        estimatedBudget: budgetAmount,\r\n        subtotal: budgetAmount,\r\n        totalAmount: budgetAmount, // Initial estimate\r\n        location: {\r\n          ...formData.location,\r\n          address: completeAddress || formData.location.streetAddress // Ensure backward compatibility\r\n        },\r\n        items: [{\r\n          serviceName: formData.title,\r\n          category: formData.category,\r\n          description: formData.description,\r\n          quantity: 1,\r\n          unitPrice: budgetAmount,\r\n          totalPrice: budgetAmount\r\n        }]\r\n      };\r\n\r\n      const response = await api.jobs.create(orderData);\r\n      \r\n      toast.success('Order submitted successfully! 🎉');\r\n      toast.success('Our admin will review and assign it to the best vendor in your area.');\r\n      \r\n      // Redirect to order tracking or dashboard\r\n      navigate('/dashboard', { \r\n        state: { \r\n          message: 'Order submitted successfully!',\r\n          orderId: response.job?._id || response.job?.id\r\n        }\r\n      });\r\n      \r\n    } catch (error) {\r\n      console.error('Order submission error:', error);\r\n      \r\n      // More detailed error handling\r\n      let errorMessage = 'Failed to submit order';\r\n      if (error.message.includes('401')) {\r\n        errorMessage = 'Authentication required. Please log in again.';\r\n      } else if (error.message.includes('400')) {\r\n        errorMessage = error.response?.data?.message || 'Invalid request data';\r\n      } else if (error.message.includes('500')) {\r\n        errorMessage = 'Server error. Please try again later.';\r\n      } else if (error.response?.data?.message) {\r\n        errorMessage = error.response.data.message;\r\n      }\r\n      \r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const steps = [\r\n    { number: 1, title: 'Service Details', icon: FileText },\r\n    { number: 2, title: 'Location', icon: MapPin },\r\n    { number: 3, title: 'Timing', icon: Calendar },\r\n    { number: 4, title: 'Budget', icon: DollarSign },\r\n    { number: 5, title: 'Review & Submit', icon: CheckCircle }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        {/* Header */}\r\n        <div className=\"text-center mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">Submit Service Request</h1>\r\n          <p className=\"text-lg text-gray-600\">Tell us what you need, and we'll connect you with the best professionals</p>\r\n        </div>\r\n\r\n        {/* Progress Steps */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex items-center justify-between\">\r\n            {steps.map((step, index) => {\r\n              const Icon = step.icon;\r\n              const isActive = currentStep === step.number;\r\n              const isCompleted = currentStep > step.number;\r\n              \r\n              return (\r\n                <div key={step.number} className=\"flex flex-col items-center flex-1\">\r\n                  <div className={`flex items-center justify-center w-10 h-10 rounded-full border-2 ${\r\n                    isCompleted ? 'bg-green-500 border-green-500 text-white' :\r\n                    isActive ? 'bg-orange-500 border-orange-500 text-white' :\r\n                    'bg-white border-gray-300 text-gray-400'\r\n                  }`}>\r\n                    <Icon size={20} />\r\n                  </div>\r\n                  <span className={`mt-2 text-sm ${\r\n                    isActive ? 'text-orange-600 font-medium' : 'text-gray-500'\r\n                  }`}>\r\n                    {step.title}\r\n                  </span>\r\n                  {index < steps.length - 1 && (\r\n                    <div className={`hidden md:block w-full h-0.5 mt-5 ${\r\n                      isCompleted ? 'bg-green-500' : 'bg-gray-300'\r\n                    }`} style={{ position: 'absolute', left: '50%', width: 'calc(100% - 40px)', zIndex: -1 }} />\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Form Content */}\r\n        <motion.div\r\n          key={currentStep}\r\n          initial={{ opacity: 0, x: 20 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          exit={{ opacity: 0, x: -20 }}\r\n          className=\"bg-white rounded-lg shadow-lg p-6 mb-6\"\r\n        >\r\n          {/* Step 1: Service Details */}\r\n          {currentStep === 1 && (\r\n            <div className=\"space-y-6\">\r\n              <h2 className=\"text-2xl font-semibold text-gray-900 mb-4\">What service do you need?</h2>\r\n              \r\n              {/* Title */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Service Title *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.title}\r\n                  onChange={(e) => handleInputChange('title', e.target.value)}\r\n                  placeholder=\"e.g., Fix leaking kitchen faucet\"\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"\r\n                />\r\n              </div>\r\n\r\n              {/* Category */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Service Category *\r\n                </label>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                  {serviceCategories.map((category) => (\r\n                    <button\r\n                      key={category.value}\r\n                      type=\"button\"\r\n                      onClick={() => handleInputChange('category', category.value)}\r\n                      className={`p-4 border rounded-lg text-center transition-colors ${\r\n                        formData.category === category.value\r\n                          ? 'border-orange-500 bg-orange-50 text-orange-700'\r\n                          : 'border-gray-300 hover:border-gray-400'\r\n                      }`}\r\n                    >\r\n                      <div className=\"text-2xl mb-2\">{category.icon}</div>\r\n                      <div className=\"text-sm font-medium\">{category.label}</div>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Description */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Detailed Description *\r\n                </label>\r\n                <div className=\"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                  <h4 className=\"text-sm font-medium text-blue-800 mb-2\">📝 What to include for {formData.category === 'general' ? 'General Maintenance' : serviceCategories.find(c => c.value === formData.category)?.label || 'your'} services:</h4>\r\n                  <div className=\"text-sm text-blue-700\">\r\n                    {formData.category === 'general' ? (\r\n                      <ul className=\"list-disc list-inside space-y-1\">\r\n                        <li>Please describe the maintenance work needed</li>\r\n                        <li>Type of repair or maintenance required</li>\r\n                        <li>Location and extent of work</li>\r\n                        <li>Current condition or problem</li>\r\n                        <li>Any safety concerns</li>\r\n                        <li>Timeline requirements</li>\r\n                      </ul>\r\n                    ) : (\r\n                      <ul className=\"list-disc list-inside space-y-1\">\r\n                        <li>Specific problem or issue you're experiencing</li>\r\n                        <li>When the problem started</li>\r\n                        <li>Location and extent of the issue</li>\r\n                        <li>Any attempted fixes or troubleshooting</li>\r\n                        <li>Safety concerns (if any)</li>\r\n                        <li>Preferred timeline</li>\r\n                      </ul>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <textarea\r\n                  value={formData.description}\r\n                  onChange={(e) => handleInputChange('description', e.target.value)}\r\n                  rows={6}\r\n                  placeholder=\"Professional carpentry and woodwork services with custom solutions, quality materials, and expert craftsmanship for all your woodworking needs.\"\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"\r\n                />\r\n              </div>\r\n\r\n              {/* Photo & Video Upload */}\r\n              <div className=\"space-y-4\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">Add Photos & Videos (Optional)</h3>\r\n                <p className=\"text-sm text-gray-600\">Help us understand the issue better by uploading photos or videos.</p>\r\n                \r\n                {/* Photo Upload */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    <Camera className=\"inline w-4 h-4 mr-1\" />\r\n                    Photos\r\n                  </label>\r\n                  <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-orange-400 transition-colors\">\r\n                    <input\r\n                      type=\"file\"\r\n                      multiple\r\n                      accept=\"image/*\"\r\n                      onChange={(e) => handleFileUpload(e, 'images')}\r\n                      className=\"hidden\"\r\n                      id=\"photo-upload\"\r\n                    />\r\n                    <label htmlFor=\"photo-upload\" className=\"cursor-pointer\">\r\n                      <div className=\"text-center\">\r\n                        <Camera className=\"mx-auto h-8 w-8 text-gray-400 mb-2\" />\r\n                        <p className=\"text-sm text-gray-600\">\r\n                          <span className=\"font-medium text-orange-600\">Click to upload</span> or drag and drop\r\n                        </p>\r\n                        <p className=\"text-xs text-gray-500\">PNG, JPG, GIF up to 10MB each</p>\r\n                      </div>\r\n                    </label>\r\n                  </div>\r\n                  \r\n                  {/* Photo Preview */}\r\n                  {formData.images.length > 0 && (\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4\">\r\n                      {formData.images.map((image, index) => (\r\n                        <div key={index} className=\"relative\">\r\n                          <img\r\n                            src={image.preview}\r\n                            alt={`Preview ${index + 1}`}\r\n                            className=\"w-full h-20 object-cover rounded-lg\"\r\n                          />\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => removeFile(index, 'images')}\r\n                            className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600\"\r\n                          >\r\n                            <X className=\"w-3 h-3\" />\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Video Upload */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    <Video className=\"inline w-4 h-4 mr-1\" />\r\n                    Videos\r\n                  </label>\r\n                  <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-orange-400 transition-colors\">\r\n                    <input\r\n                      type=\"file\"\r\n                      multiple\r\n                      accept=\"video/*\"\r\n                      onChange={(e) => handleFileUpload(e, 'videos')}\r\n                      className=\"hidden\"\r\n                      id=\"video-upload\"\r\n                    />\r\n                    <label htmlFor=\"video-upload\" className=\"cursor-pointer\">\r\n                      <div className=\"text-center\">\r\n                        <Video className=\"mx-auto h-8 w-8 text-gray-400 mb-2\" />\r\n                        <p className=\"text-sm text-gray-600\">\r\n                          <span className=\"font-medium text-orange-600\">Click to upload</span> or drag and drop\r\n                        </p>\r\n                        <p className=\"text-xs text-gray-500\">MP4, WebM, MOV up to 50MB each</p>\r\n                      </div>\r\n                    </label>\r\n                  </div>\r\n                  \r\n                  {/* Video Preview */}\r\n                  {formData.videos.length > 0 && (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\r\n                      {formData.videos.map((video, index) => (\r\n                        <div key={index} className=\"relative\">\r\n                          <video\r\n                            src={video.preview}\r\n                            className=\"w-full h-32 object-cover rounded-lg\"\r\n                            controls\r\n                          />\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => removeFile(index, 'videos')}\r\n                            className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600\"\r\n                          >\r\n                            <X className=\"w-3 h-3\" />\r\n                          </button>\r\n                          <div className=\"absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded\">\r\n                            {video.file.name}\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          )}\r\n\r\n          {/* Step 2: Location */}\r\n          {currentStep === 2 && (\r\n            <div className=\"space-y-6\">\r\n              <h2 className=\"text-2xl font-semibold text-gray-900 mb-4\">Where is the service needed?</h2>\r\n              \r\n              {/* Auto-fill notification */}\r\n              {user?.address && (\r\n                <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center\">\r\n                  <CheckCircle className=\"h-5 w-5 text-green-500 mr-3\" />\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"text-sm font-medium text-green-800\">\r\n                      Address auto-filled from your profile!\r\n                    </div>\r\n                    <div className=\"text-sm text-green-600\">\r\n                      We've pre-filled your saved address. You can edit it below if needed, or update your profile address for future orders.\r\n                    </div>\r\n                  </div>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      // Auto-fill from user profile\r\n                      if (user.address) {\r\n                        handleInputChange('location.streetAddress', user.address);\r\n                        handleInputChange('location.address', user.address); // For backward compatibility\r\n                      }\r\n                      if (user.city) {\r\n                        handleInputChange('location.city', user.city);\r\n                      }\r\n                      if (user.state) {\r\n                        handleInputChange('location.state', user.state);\r\n                      }\r\n                      if (user.zipCode) {\r\n                        handleInputChange('location.zipCode', user.zipCode);\r\n                      }\r\n                      toast.success('Address auto-filled from your profile');\r\n                    }}\r\n                    className=\"ml-3 text-sm text-green-600 hover:text-green-800 underline\"\r\n                  >\r\n                    Manage Profile →\r\n                  </button>\r\n                </div>\r\n              )}\r\n              \r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Street Address *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.location.streetAddress}\r\n                    onChange={(e) => handleInputChange('location.streetAddress', e.target.value)}\r\n                    placeholder=\"e.g., Jalan Permas 16/1\"\r\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"\r\n                  />\r\n                </div>\r\n\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      City/Area *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={formData.location.city}\r\n                      onChange={(e) => handleInputChange('location.city', e.target.value)}\r\n                      placeholder=\"e.g., Masai\"\r\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      State *\r\n                    </label>\r\n                    <select\r\n                      value={formData.location.state}\r\n                      onChange={(e) => handleInputChange('location.state', e.target.value)}\r\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"\r\n                    >\r\n                      <option value=\"\">Select State</option>\r\n                      <option value=\"Johor\">Johor</option>\r\n                      <option value=\"Kedah\">Kedah</option>\r\n                      <option value=\"Kelantan\">Kelantan</option>\r\n                      <option value=\"Kuala Lumpur\">Kuala Lumpur</option>\r\n                      <option value=\"Labuan\">Labuan</option>\r\n                      <option value=\"Melaka\">Melaka</option>\r\n                      <option value=\"Negeri Sembilan\">Negeri Sembilan</option>\r\n                      <option value=\"Pahang\">Pahang</option>\r\n                      <option value=\"Penang\">Penang</option>\r\n                      <option value=\"Perak\">Perak</option>\r\n                      <option value=\"Perlis\">Perlis</option>\r\n                      <option value=\"Putrajaya\">Putrajaya</option>\r\n                      <option value=\"Sabah\">Sabah</option>\r\n                      <option value=\"Sarawak\">Sarawak</option>\r\n                      <option value=\"Selangor\">Selangor</option>\r\n                      <option value=\"Terengganu\">Terengganu</option>\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Postal Code *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={formData.location.zipCode}\r\n                      onChange={(e) => handleInputChange('location.zipCode', e.target.value)}\r\n                      placeholder=\"e.g., 81750\"\r\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Full Address Preview\r\n                  </label>\r\n                  <div className=\"p-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700\">\r\n                    {[\r\n                      formData.location.unit && `Unit ${formData.location.unit}`,\r\n                      formData.location.building,\r\n                      formData.location.streetAddress,\r\n                      formData.location.zipCode && formData.location.city && `${formData.location.zipCode} ${formData.location.city}`,\r\n                      formData.location.state\r\n                    ].filter(Boolean).join(', ') || 'Address will appear here as you fill in the fields above'}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          )}\r\n\r\n          {/* Step 3: Timing */}\r\n          {currentStep === 3 && (\r\n            <div className=\"space-y-6\">\r\n              <h2 className=\"text-2xl font-semibold text-gray-900 mb-4\">When do you need this service?</h2>\r\n              \r\n              <div className=\"space-y-6\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Preferred Date *\r\n                  </label>\r\n                  <input\r\n                    type=\"date\"\r\n                    value={formData.requestedTimeSlot.date}\r\n                    onChange={(e) => handleInputChange('requestedTimeSlot.date', e.target.value)}\r\n                    min={new Date().toISOString().split('T')[0]}\r\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"\r\n                  />\r\n                  <p className=\"mt-1 text-sm text-gray-500\">Please select from today onwards to allow proper scheduling</p>\r\n                </div>\r\n\r\n                {/* Time Sessions */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-3\">\r\n                    Preferred Time Session\r\n                  </label>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                    <label className=\"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors\">\r\n                      <input\r\n                        type=\"radio\"\r\n                        name=\"timeSession\"\r\n                        value=\"morning\"\r\n                        checked={formData.requestedTimeSlot.startTime === '08:00' && formData.requestedTimeSlot.endTime === '12:00'}\r\n                        onChange={() => {\r\n                          handleInputChange('requestedTimeSlot.startTime', '08:00');\r\n                          handleInputChange('requestedTimeSlot.endTime', '12:00');\r\n                        }}\r\n                        className=\"mr-3 text-orange-600\"\r\n                      />\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"font-medium text-gray-900\">Morning Session</div>\r\n                        <div className=\"text-sm text-gray-500\">8:00 AM - 12:00 PM</div>\r\n                        <div className=\"text-sm text-gray-400\">Good for most services and appointments</div>\r\n                      </div>\r\n                    </label>\r\n\r\n                    <label className=\"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors\">\r\n                      <input\r\n                        type=\"radio\"\r\n                        name=\"timeSession\"\r\n                        value=\"afternoon\"\r\n                        checked={formData.requestedTimeSlot.startTime === '12:00' && formData.requestedTimeSlot.endTime === '16:00'}\r\n                        onChange={() => {\r\n                          handleInputChange('requestedTimeSlot.startTime', '12:00');\r\n                          handleInputChange('requestedTimeSlot.endTime', '16:00');\r\n                        }}\r\n                        className=\"mr-3 text-orange-600\"\r\n                      />\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"font-medium text-gray-900\">Afternoon Session</div>\r\n                        <div className=\"text-sm text-gray-500\">12:00 PM - 4:00 PM</div>\r\n                        <div className=\"text-sm text-gray-400\">Good for most services and appointments</div>\r\n                      </div>\r\n                    </label>\r\n\r\n                    <label className=\"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors\">\r\n                      <input\r\n                        type=\"radio\"\r\n                        name=\"timeSession\"\r\n                        value=\"evening\"\r\n                        checked={formData.requestedTimeSlot.startTime === '16:00' && formData.requestedTimeSlot.endTime === '20:00'}\r\n                        onChange={() => {\r\n                          handleInputChange('requestedTimeSlot.startTime', '16:00');\r\n                          handleInputChange('requestedTimeSlot.endTime', '20:00');\r\n                        }}\r\n                        className=\"mr-3 text-orange-600\"\r\n                      />\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"font-medium text-gray-900\">Evening Session</div>\r\n                        <div className=\"text-sm text-gray-500\">4:00 PM - 8:00 PM</div>\r\n                        <div className=\"text-sm text-gray-400\">Perfect for after work hours</div>\r\n                      </div>\r\n                    </label>\r\n\r\n                    <label className=\"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors\">\r\n                      <input\r\n                        type=\"radio\"\r\n                        name=\"timeSession\"\r\n                        value=\"flexible\"\r\n                        checked={formData.requestedTimeSlot.startTime === '09:00' && formData.requestedTimeSlot.endTime === '17:00'}\r\n                        onChange={() => {\r\n                          handleInputChange('requestedTimeSlot.startTime', '09:00');\r\n                          handleInputChange('requestedTimeSlot.endTime', '17:00');\r\n                        }}\r\n                        className=\"mr-3 text-orange-600\"\r\n                      />\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"font-medium text-gray-900\">Flexible Timing</div>\r\n                        <div className=\"text-sm text-gray-500\">Any time during business hours</div>\r\n                        <div className=\"text-sm text-gray-400\">Let vendor choose the best time</div>\r\n                      </div>\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n\r\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                <div className=\"flex\">\r\n                  <AlertCircle className=\"h-5 w-5 text-blue-400 mr-2 mt-0.5\" />\r\n                  <div className=\"text-sm text-blue-700\">\r\n                    <strong>Note:</strong> These are your preferred times. The vendor will contact you to confirm the final schedule after assignment.\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Step 4: Budget */}\r\n          {currentStep === 4 && (\r\n            <div className=\"space-y-6\">\r\n              <h2 className=\"text-2xl font-semibold text-gray-900 mb-4\">What's your budget estimate?</h2>\r\n              \r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Estimated Budget (SGD) *\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <span className=\"absolute left-3 top-3 text-gray-500\">$</span>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={formData.estimatedBudget}\r\n                    onChange={(e) => handleInputChange('estimatedBudget', e.target.value)}\r\n                    placeholder=\"0.00\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    className=\"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"\r\n                  />\r\n                </div>\r\n                <p className=\"mt-2 text-sm text-gray-600\">\r\n                  This is just an estimate. The vendor will provide an exact quote after reviewing your requirements.\r\n                </p>\r\n              </div>\r\n\r\n              {/* Contact Number */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Contact Number\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  value={formData.customerContactNumber}\r\n                  onChange={(e) => handleInputChange('customerContactNumber', e.target.value)}\r\n                  placeholder=\"Phone number for vendor to contact you\"\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"\r\n                />\r\n              </div>\r\n\r\n              {/* Special Instructions */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Special Instructions\r\n                </label>\r\n                <textarea\r\n                  value={formData.specialInstructions}\r\n                  onChange={(e) => handleInputChange('specialInstructions', e.target.value)}\r\n                  rows={4}\r\n                  placeholder=\"Any specific requirements, preferences, or important details the vendor should know...\"\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500\"\r\n                />\r\n              </div>\r\n\r\n              {/* Image Upload */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Photos (Optional)\r\n                </label>\r\n                <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\">\r\n                  <input\r\n                    type=\"file\"\r\n                    multiple\r\n                    accept=\"image/*\"\r\n                    onChange={(e) => handleFileUpload(e, 'images')}\r\n                    className=\"hidden\"\r\n                    id=\"image-upload\"\r\n                  />\r\n                  <label htmlFor=\"image-upload\" className=\"cursor-pointer\">\r\n                    <Upload className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\r\n                    <div className=\"text-lg font-medium text-gray-700\">Upload Photos</div>\r\n                    <div className=\"text-sm text-gray-500\">Help vendors understand your needs better</div>\r\n                  </label>\r\n                </div>\r\n\r\n                {formData.images.length > 0 && (\r\n                  <div className=\"mt-4\">\r\n                    <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Uploaded Images:</h4>\r\n                    <div className=\"space-y-2\">\r\n                      {formData.images.map((image, index) => (\r\n                        <div key={index} className=\"flex items-center justify-between p-2 bg-gray-50 rounded\">\r\n                          <span className=\"text-sm text-gray-600\">{image}</span>\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => removeFile(index, 'images')}\r\n                            className=\"text-red-600 hover:text-red-800\"\r\n                          >\r\n                            Remove\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Step 5: Review & Submit */}\r\n          {currentStep === 5 && (\r\n            <div className=\"space-y-6\">\r\n              <h2 className=\"text-2xl font-semibold text-gray-900 mb-4\">Review Your Request</h2>\r\n              \r\n              <div className=\"space-y-6\">\r\n                {/* Service Summary */}\r\n                <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                  <h3 className=\"font-semibold text-gray-900 mb-3\">Service Details</h3>\r\n                  <div className=\"space-y-2 text-sm\">\r\n                    <div><strong>Title:</strong> {formData.title}</div>\r\n                    <div><strong>Category:</strong> {serviceCategories.find(c => c.value === formData.category)?.label}</div>\r\n                    <div><strong>Description:</strong> {formData.description}</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Location Summary */}\r\n                <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                  <h3 className=\"font-semibold text-gray-900 mb-3\">Service Location</h3>\r\n                  <div className=\"text-sm space-y-1\">\r\n                    {formData.location.unit && <div><strong>Unit:</strong> {formData.location.unit}</div>}\r\n                    {formData.location.building && <div><strong>Building:</strong> {formData.location.building}</div>}\r\n                    {formData.location.streetAddress && <div><strong>Street:</strong> {formData.location.streetAddress}</div>}\r\n                    <div><strong>Area:</strong> {formData.location.city}, {formData.location.state} {formData.location.zipCode}</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Timing Summary */}\r\n                <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                  <h3 className=\"font-semibold text-gray-900 mb-3\">Preferred Schedule</h3>\r\n                  <div className=\"text-sm\">\r\n                    <div><strong>Date:</strong> {formData.requestedTimeSlot.date}</div>\r\n                    <div><strong>Time:</strong> {formData.requestedTimeSlot.startTime} - {formData.requestedTimeSlot.endTime}</div>\r\n                    <div><strong>Duration:</strong> {formData.estimatedDuration} hours</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Budget Summary */}\r\n                <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                  <h3 className=\"font-semibold text-gray-900 mb-3\">Budget Estimate</h3>\r\n                  <div className=\"text-lg font-semibold text-orange-600\">\r\n                    ${parseFloat(formData.estimatedBudget || 0).toFixed(2)} SGD\r\n                  </div>\r\n                </div>\r\n\r\n                {/* What happens next */}\r\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                  <h3 className=\"font-semibold text-blue-900 mb-3\">What happens next?</h3>\r\n                  <ol className=\"list-decimal list-inside space-y-2 text-sm text-blue-800\">\r\n                    <li>Our admin will review your request within 2 hours</li>\r\n                    <li>We'll assign the best-rated vendor in your area</li>\r\n                    <li>The vendor will contact you directly to discuss details</li>\r\n                    <li>You'll receive a detailed quote for approval</li>\r\n                    <li>Once approved, you can pay securely through our platform</li>\r\n                    <li>Work begins as scheduled!</li>\r\n                  </ol>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </motion.div>\r\n\r\n        {/* Navigation Buttons */}\r\n        <div className=\"flex justify-between items-center\">\r\n          {currentStep > 1 ? (\r\n            <button\r\n              type=\"button\"\r\n              onClick={prevStep}\r\n              className=\"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\r\n            >\r\n              Previous\r\n            </button>\r\n          ) : (\r\n            <div></div>\r\n          )}\r\n\r\n          {currentStep < 5 ? (\r\n            <button\r\n              type=\"button\"\r\n              onClick={nextStep}\r\n              disabled={!validateStep(currentStep)}\r\n              className=\"px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n            >\r\n              Next\r\n            </button>\r\n          ) : (\r\n            <button\r\n              onClick={handleSubmit}\r\n              disabled={loading}\r\n              className=\"px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center\"\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"></div>\r\n                  Submitting...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <CheckCircle className=\"w-5 h-5 mr-2\" />\r\n                  Submit Request\r\n                </>\r\n              )}\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderSubmissionPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}