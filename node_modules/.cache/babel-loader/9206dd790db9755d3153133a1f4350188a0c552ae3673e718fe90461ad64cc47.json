{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import{Plus,Edit2,Trash2,Eye,EyeOff,Save,X,AlertTriangle,Info,Zap,TrendingUp,Pin,PinOff,FileText,Upload,Clock,Users,Search,Grid,List,BarChart3}from'lucide-react';import{useAuth}from'../../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AnnouncementManagement=()=>{const{user}=useAuth();const[announcements,setAnnouncements]=useState([]);const[loading,setLoading]=useState(true);const[editingAnnouncement,setEditingAnnouncement]=useState(null);const[showForm,setShowForm]=useState(false);const[selectedImage,setSelectedImage]=useState(null);const[imagePreview,setImagePreview]=useState(null);const[uploading,setUploading]=useState(false);const[viewMode,setViewMode]=useState('grid');const[filters,setFilters]=useState({search:'',priority:'',category:'',targetAudience:'',status:''});const[stats,setStats]=useState({overview:{total:0,published:0,urgent:0,important:0,expired:0},priorityStats:[],categoryStats:[],audienceStats:[]});const[formData,setFormData]=useState({title:'',content:'',summary:'',priority:'normal',targetAudience:'all',category:'general',serviceAreas:[],isPublished:false,expiresAt:'',isPinned:false,sendNotification:false,imageUrl:'',order:0});// Priority options\nconst priorityOptions=[{value:'normal',label:'Normal',icon:Info,color:'orange'},{value:'important',label:'Important',icon:AlertTriangle,color:'yellow'},{value:'urgent',label:'Urgent',icon:Zap,color:'red'}];// Category options\nconst categoryOptions=[{value:'general',label:'General'},{value:'service-update',label:'Service Update'},{value:'maintenance',label:'Maintenance'},{value:'policy-change',label:'Policy Change'},{value:'new-service',label:'New Service'},{value:'pricing',label:'Pricing'},{value:'system',label:'System'},{value:'emergency',label:'Emergency'}];// Target audience options\nconst audienceOptions=[{value:'all',label:'All Users'},{value:'customers',label:'Customers'},{value:'vendors',label:'Vendors'},{value:'admins',label:'Admins'}];// Fetch announcements\nconst fetchAnnouncements=async()=>{try{const queryParams=new URLSearchParams();Object.entries(filters).forEach(_ref=>{let[key,value]=_ref;if(value)queryParams.append(key,value);});const response=await fetch(`/api/announcements?${queryParams}`,{headers:{'Authorization':`Bearer ${localStorage.getItem('token')}`}});if(!response.ok)throw new Error('Failed to fetch announcements');const data=await response.json();setAnnouncements(data.announcements||[]);}catch(error){console.error('Error fetching announcements:',error);alert('Failed to fetch announcements: '+error.message);}finally{setLoading(false);}};// Fetch statistics\nconst fetchStats=async()=>{try{const response=await fetch('/api/announcements/stats',{headers:{'Authorization':`Bearer ${localStorage.getItem('token')}`}});if(!response.ok)throw new Error('Failed to fetch stats');const data=await response.json();setStats(data);}catch(error){console.error('Error fetching stats:',error);}};useEffect(()=>{if((user===null||user===void 0?void 0:user.role)==='admin'){fetchAnnouncements();fetchStats();}},[user,filters]);// Handle form input changes\nconst handleInputChange=e=>{const{name,value,type,checked}=e.target;setFormData(prev=>({...prev,[name]:type==='checkbox'?checked:value}));};// Handle service areas input\nconst handleServiceAreasChange=e=>{const areas=e.target.value.split(',').map(area=>area.trim()).filter(area=>area);setFormData(prev=>({...prev,serviceAreas:areas}));};// Handle image selection\nconst handleImageSelect=e=>{const file=e.target.files[0];if(file){if(!file.type.startsWith('image/')){alert('Please select a valid image file');return;}if(file.size>5*1024*1024){alert('Image size should be less than 5MB');return;}setSelectedImage(file);const reader=new FileReader();reader.onload=e=>{setImagePreview(e.target.result);};reader.readAsDataURL(file);}};// Upload image (demo using base64)\nconst uploadImage=async()=>{if(!selectedImage)return null;setUploading(true);try{return imagePreview;}catch(error){console.error('Image upload error:',error);alert('Failed to process image: '+error.message);return null;}finally{setUploading(false);}};// Remove selected image\nconst removeSelectedImage=()=>{setSelectedImage(null);setImagePreview(null);};// Submit announcement\nconst handleSubmit=async e=>{e.preventDefault();try{if(!formData.title.trim()||!formData.content.trim()||!formData.summary.trim()){alert('Title, content, and summary are required');return;}let imageUrl=formData.imageUrl;if(selectedImage){imageUrl=await uploadImage();if(!imageUrl){alert('Failed to upload image. Please try again.');return;}}const announcementData={...formData,imageUrl,expiresAt:formData.expiresAt?new Date(formData.expiresAt).toISOString():null};const url=editingAnnouncement?`/api/announcements/${editingAnnouncement._id}`:'/api/announcements';const method=editingAnnouncement?'PUT':'POST';const response=await fetch(url,{method,headers:{'Content-Type':'application/json','Authorization':`Bearer ${localStorage.getItem('token')}`},body:JSON.stringify(announcementData)});if(!response.ok){const error=await response.json();throw new Error(error.message||'Failed to save announcement');}alert(`Announcement ${editingAnnouncement?'updated':'created'} successfully!`);await fetchAnnouncements();await fetchStats();resetForm();}catch(error){console.error('Error saving announcement:',error);alert('Error saving announcement: '+error.message);}};// Delete announcement\nconst handleDelete=async id=>{if(window.confirm('Are you sure you want to delete this announcement?')){try{const response=await fetch(`/api/announcements/${id}`,{method:'DELETE',headers:{'Authorization':`Bearer ${localStorage.getItem('token')}`}});if(!response.ok)throw new Error('Failed to delete announcement');await fetchAnnouncements();await fetchStats();alert('Announcement deleted successfully!');}catch(error){console.error('Error deleting announcement:',error);alert('Error deleting announcement: '+error.message);}}};// Toggle publish status\nconst togglePublishStatus=async announcement=>{try{const response=await fetch(`/api/announcements/${announcement._id}/publish`,{method:'PATCH',headers:{'Content-Type':'application/json','Authorization':`Bearer ${localStorage.getItem('token')}`},body:JSON.stringify({isPublished:!announcement.isPublished})});if(!response.ok)throw new Error('Failed to update publish status');await fetchAnnouncements();await fetchStats();}catch(error){console.error('Error updating publish status:',error);alert('Error updating publish status: '+error.message);}};// Toggle pin status\nconst togglePinStatus=async announcement=>{try{const response=await fetch(`/api/announcements/${announcement._id}/pin`,{method:'PATCH',headers:{'Content-Type':'application/json','Authorization':`Bearer ${localStorage.getItem('token')}`},body:JSON.stringify({isPinned:!announcement.isPinned})});if(!response.ok)throw new Error('Failed to update pin status');await fetchAnnouncements();}catch(error){console.error('Error updating pin status:',error);alert('Error updating pin status: '+error.message);}};// Start editing\nconst startEditing=announcement=>{setEditingAnnouncement(announcement);setFormData({title:announcement.title,content:announcement.content,summary:announcement.summary,priority:announcement.priority,targetAudience:announcement.targetAudience,category:announcement.category,serviceAreas:announcement.serviceAreas,isPublished:announcement.isPublished,expiresAt:announcement.expiresAt?new Date(announcement.expiresAt).toISOString().slice(0,16):'',isPinned:announcement.isPinned,sendNotification:announcement.sendNotification,imageUrl:announcement.imageUrl||'',order:announcement.order||0});setShowForm(true);};// Reset form\nconst resetForm=()=>{setFormData({title:'',content:'',summary:'',priority:'normal',targetAudience:'all',category:'general',serviceAreas:[],isPublished:false,expiresAt:'',isPinned:false,sendNotification:false,imageUrl:'',order:0});setEditingAnnouncement(null);setShowForm(false);setSelectedImage(null);setImagePreview(null);setUploading(false);};// Get priority icon and color\nconst getPriorityDisplay=priority=>{const option=priorityOptions.find(opt=>opt.value===priority);return option||priorityOptions[0];};// Check if announcement is expired\nconst isExpired=announcement=>{return announcement.expiresAt&&new Date(announcement.expiresAt)<new Date();};if((user===null||user===void 0?void 0:user.role)!=='admin'){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Access denied. Admin privileges required.\"})});}if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:\"Loading announcements...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"relative bg-gradient-to-r from-orange-600 to-orange-800 text-white py-20\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black opacity-20\"}),/*#__PURE__*/_jsx(\"div\",{className:\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl md:text-5xl font-bold mb-4\",children:\"Announcement Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl text-orange-100 max-w-2xl\",children:\"Keep your users informed with important updates, service announcements, and policy changes\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowForm(true),className:\"bg-white text-orange-600 px-8 py-4 rounded-lg hover:bg-orange-50 transition-all duration-200 flex items-center shadow-lg hover:shadow-xl transform hover:scale-105 font-semibold\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-5 h-5 mr-2\"}),\"Create Announcement\"]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-8 relative z-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(BarChart3,{className:\"h-8 w-8 text-orange-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Total\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:stats.overview.total})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(Eye,{className:\"h-8 w-8 text-green-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Published\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:stats.overview.published})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(Zap,{className:\"h-8 w-8 text-red-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Urgent\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:stats.overview.urgent})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-8 w-8 text-yellow-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Important\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:stats.overview.important})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(Clock,{className:\"h-8 w-8 text-gray-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Expired\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:stats.overview.expired})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-4 flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex-1 max-w-md\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search announcements...\",value:filters.search,onChange:e=>setFilters(prev=>({...prev,search:e.target.value})),className:\"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:filters.priority,onChange:e=>setFilters(prev=>({...prev,priority:e.target.value})),className:\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Priorities\"}),priorityOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))]}),/*#__PURE__*/_jsxs(\"select\",{value:filters.category,onChange:e=>setFilters(prev=>({...prev,category:e.target.value})),className:\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Categories\"}),categoryOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))]}),/*#__PURE__*/_jsxs(\"select\",{value:filters.status,onChange:e=>setFilters(prev=>({...prev,status:e.target.value})),className:\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"expired\",children:\"Expired\"}),/*#__PURE__*/_jsx(\"option\",{value:\"draft\",children:\"Draft\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setViewMode('grid'),className:`p-2 rounded-lg transition-colors ${viewMode==='grid'?'bg-orange-100 text-orange-600':'text-gray-400 hover:text-gray-600'}`,children:/*#__PURE__*/_jsx(Grid,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setViewMode('list'),className:`p-2 rounded-lg transition-colors ${viewMode==='list'?'bg-orange-100 text-orange-600':'text-gray-400 hover:text-gray-600'}`,children:/*#__PURE__*/_jsx(List,{className:\"w-5 h-5\"})})]})]})}),/*#__PURE__*/_jsx(AnimatePresence,{children:showForm&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:editingAnnouncement?'Edit Announcement':'Create New Announcement'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:editingAnnouncement?'Update announcement details':'Share important updates with your users'})]}),/*#__PURE__*/_jsx(\"button\",{onClick:resetForm,className:\"text-gray-400 hover:text-gray-600 hover:bg-gray-200 p-2 rounded-full transition-all duration-200\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200 pb-4\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(FileText,{className:\"w-5 h-5 mr-2 text-orange-600\"}),\"Basic Information\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:[\"Title \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:formData.title,onChange:handleInputChange,required:true,maxLength:200,placeholder:\"Enter announcement title\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:[\"Priority \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"select\",{name:\"priority\",value:formData.priority,onChange:handleInputChange,className:\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\",children:priorityOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:[\"Category \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"select\",{name:\"category\",value:formData.category,onChange:handleInputChange,className:\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\",children:categoryOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:[\"Target Audience \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"select\",{name:\"targetAudience\",value:formData.targetAudience,onChange:handleInputChange,className:\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\",children:audienceOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Expiration Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",name:\"expiresAt\",value:formData.expiresAt,onChange:handleInputChange,className:\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Service Areas (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.serviceAreas.join(', '),onChange:handleServiceAreasChange,placeholder:\"Kuala Lumpur, Selangor, Penang\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Leave empty to target all areas, or specify areas separated by commas\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Featured Image\"}),!imagePreview?/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-orange-400 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageSelect,className:\"hidden\",id:\"image-upload\"}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"image-upload\",className:\"cursor-pointer flex flex-col items-center space-y-2\",children:[/*#__PURE__*/_jsx(Upload,{className:\"w-8 h-8 text-orange-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-orange-600 font-medium\",children:\"Upload Image\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"PNG, JPG up to 5MB\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:imagePreview,alt:\"Preview\",className:\"w-full h-48 object-cover rounded-lg\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:removeSelectedImage,className:\"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600\",children:/*#__PURE__*/_jsx(X,{className:\"w-4 h-4\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:[\"Summary \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{name:\"summary\",value:formData.summary,onChange:handleInputChange,required:true,maxLength:300,rows:3,placeholder:\"Brief summary of the announcement\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[formData.summary.length,\"/300 characters\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:[\"Content \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{name:\"content\",value:formData.content,onChange:handleInputChange,required:true,rows:8,placeholder:\"Full announcement content\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"isPublished\",checked:formData.isPublished,onChange:handleInputChange,className:\"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Publish immediately\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"isPinned\",checked:formData.isPinned,onChange:handleInputChange,className:\"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Pin to top\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"sendNotification\",checked:formData.sendNotification,onChange:handleInputChange,className:\"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Send notification\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",disabled:uploading,className:\"flex-1 sm:flex-none bg-orange-600 text-white px-8 py-3 rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center font-semibold disabled:opacity-50\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-5 h-5 mr-2\"}),editingAnnouncement?'Update':'Create',\" Announcement\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:resetForm,className:\"flex-1 sm:flex-none bg-gray-200 text-gray-700 px-8 py-3 rounded-lg hover:bg-gray-300 transition-colors flex items-center justify-center font-semibold\",children:[/*#__PURE__*/_jsx(X,{className:\"w-5 h-5 mr-2\"}),\"Cancel\"]})]})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"All Announcements\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"Manage your system announcements\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[announcements.length,\" \",announcements.length===1?'announcement':'announcements']})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:announcements.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4\",children:/*#__PURE__*/_jsx(FileText,{className:\"w-12 h-12 text-gray-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 mb-2\",children:\"No announcements yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-6 max-w-sm mx-auto\",children:\"Create your first announcement to keep users informed about important updates.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(true),className:\"bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700 transition-colors\",children:\"Create Your First Announcement\"})]}):viewMode==='grid'?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:announcements.map((announcement,index)=>{var _categoryOptions$find,_audienceOptions$find;const priorityDisplay=getPriorityDisplay(announcement.priority);const PriorityIcon=priorityDisplay.icon;const expired=isExpired(announcement);return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:index*0.1},className:`border rounded-lg p-6 hover:shadow-md transition-all duration-200 ${expired?'border-gray-300 bg-gray-50':'border-gray-200 bg-white'}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(PriorityIcon,{className:`w-5 h-5 text-${priorityDisplay.color}-600`}),/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded-full text-xs font-medium bg-${priorityDisplay.color}-100 text-${priorityDisplay.color}-800`,children:priorityDisplay.label}),announcement.isPinned&&/*#__PURE__*/_jsx(Pin,{className:\"w-4 h-4 text-yellow-600\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePublishStatus(announcement),className:`p-1 rounded transition-colors ${announcement.isPublished?'text-green-600 hover:text-green-800':'text-gray-400 hover:text-gray-600'}`,children:announcement.isPublished?/*#__PURE__*/_jsx(Eye,{className:\"w-4 h-4\"}):/*#__PURE__*/_jsx(EyeOff,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePinStatus(announcement),className:`p-1 rounded transition-colors ${announcement.isPinned?'text-yellow-600 hover:text-yellow-800':'text-gray-400 hover:text-yellow-600'}`,children:announcement.isPinned?/*#__PURE__*/_jsx(Pin,{className:\"w-4 h-4\"}):/*#__PURE__*/_jsx(PinOff,{className:\"w-4 h-4\"})})]})]}),/*#__PURE__*/_jsx(\"h3\",{className:`font-semibold mb-2 ${expired?'text-gray-500':'text-gray-900'}`,children:announcement.title}),/*#__PURE__*/_jsx(\"p\",{className:`text-sm mb-4 line-clamp-3 ${expired?'text-gray-400':'text-gray-600'}`,children:announcement.summary}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs text-gray-500 mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded bg-gray-100 ${expired?'text-gray-400':'text-gray-600'}`,children:(_categoryOptions$find=categoryOptions.find(cat=>cat.value===announcement.category))===null||_categoryOptions$find===void 0?void 0:_categoryOptions$find.label}),/*#__PURE__*/_jsxs(\"span\",{className:`flex items-center ${expired?'text-gray-400':'text-gray-500'}`,children:[/*#__PURE__*/_jsx(Users,{className:\"w-3 h-3 mr-1\"}),(_audienceOptions$find=audienceOptions.find(aud=>aud.value===announcement.targetAudience))===null||_audienceOptions$find===void 0?void 0:_audienceOptions$find.label]})]}),expired&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-xs text-red-500 mb-4\",children:[/*#__PURE__*/_jsx(Clock,{className:\"w-3 h-3 mr-1\"}),\"Expired on \",new Date(announcement.expiresAt).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between pt-4 border-t border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 text-xs text-gray-500\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"w-3 h-3\"}),/*#__PURE__*/_jsxs(\"span\",{children:[announcement.views||0,\" views\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEditing(announcement),className:\"text-indigo-600 hover:text-indigo-800 transition-colors\",children:/*#__PURE__*/_jsx(Edit2,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(announcement._id),className:\"text-red-600 hover:text-red-800 transition-colors\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]})]})]},announcement._id);})}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b-2 border-gray-200 bg-gray-50\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-4 px-4 font-semibold text-gray-700 text-sm\",children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-4 px-4 font-semibold text-gray-700 text-sm\",children:\"Priority\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-4 px-4 font-semibold text-gray-700 text-sm\",children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-4 px-4 font-semibold text-gray-700 text-sm\",children:\"Audience\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-4 px-4 font-semibold text-gray-700 text-sm\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-4 px-4 font-semibold text-gray-700 text-sm\",children:\"Views\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-4 px-4 font-semibold text-gray-700 text-sm\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-200\",children:announcements.map((announcement,index)=>{var _categoryOptions$find2,_audienceOptions$find2;const priorityDisplay=getPriorityDisplay(announcement.priority);const PriorityIcon=priorityDisplay.icon;const expired=isExpired(announcement);return/*#__PURE__*/_jsxs(motion.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:index*0.1},className:`hover:bg-gray-50 transition-colors ${expired?'opacity-60':''}`,children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-4 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[announcement.isPinned&&/*#__PURE__*/_jsx(Pin,{className:\"w-4 h-4 text-yellow-600\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 text-sm\",children:announcement.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1 line-clamp-2\",children:announcement.summary})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-4 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(PriorityIcon,{className:`w-4 h-4 text-${priorityDisplay.color}-600`}),/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded-full text-xs font-medium bg-${priorityDisplay.color}-100 text-${priorityDisplay.color}-800`,children:priorityDisplay.label})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-4 px-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded bg-gray-100 text-gray-700 text-xs\",children:(_categoryOptions$find2=categoryOptions.find(cat=>cat.value===announcement.category))===null||_categoryOptions$find2===void 0?void 0:_categoryOptions$find2.label})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-4 px-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:(_audienceOptions$find2=audienceOptions.find(aud=>aud.value===announcement.targetAudience))===null||_audienceOptions$find2===void 0?void 0:_audienceOptions$find2.label})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-4 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePublishStatus(announcement),className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium transition-colors ${announcement.isPublished?'bg-green-100 text-green-800 hover:bg-green-200':'bg-yellow-100 text-yellow-800 hover:bg-yellow-200'}`,children:announcement.isPublished?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Eye,{className:\"w-3 h-3 mr-1\"}),\" Published\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(EyeOff,{className:\"w-3 h-3 mr-1\"}),\" Draft\"]})}),expired&&/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800\",children:[/*#__PURE__*/_jsx(Clock,{className:\"w-3 h-3 mr-1\"}),\" Expired\"]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-4 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"w-4 h-4 mr-2 text-gray-400\"}),/*#__PURE__*/_jsx(\"span\",{children:announcement.views||0})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-4 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePinStatus(announcement),className:`transition-colors ${announcement.isPinned?'text-yellow-600 hover:text-yellow-800':'text-gray-400 hover:text-yellow-600'}`,children:announcement.isPinned?/*#__PURE__*/_jsx(Pin,{className:\"w-4 h-4\"}):/*#__PURE__*/_jsx(PinOff,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEditing(announcement),className:\"text-indigo-600 hover:text-indigo-800 transition-colors\",children:/*#__PURE__*/_jsx(Edit2,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(announcement._id),className:\"text-red-600 hover:text-red-800 transition-colors\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]})})]},announcement._id);})})]})})})]})]})]});};export default AnnouncementManagement;","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","Plus","Edit2","Trash2","Eye","EyeOff","Save","X","AlertTriangle","Info","Zap","TrendingUp","Pin","PinOff","FileText","Upload","Clock","Users","Search","Grid","List","BarChart3","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AnnouncementManagement","user","announcements","setAnnouncements","loading","setLoading","editingAnnouncement","setEditingAnnouncement","showForm","setShowForm","selectedImage","setSelectedImage","imagePreview","setImagePreview","uploading","setUploading","viewMode","setViewMode","filters","setFilters","search","priority","category","targetAudience","status","stats","setStats","overview","total","published","urgent","important","expired","priorityStats","categoryStats","audienceStats","formData","setFormData","title","content","summary","serviceAreas","isPublished","expiresAt","isPinned","sendNotification","imageUrl","order","priorityOptions","value","label","icon","color","categoryOptions","audienceOptions","fetchAnnouncements","queryParams","URLSearchParams","Object","entries","forEach","_ref","key","append","response","fetch","headers","localStorage","getItem","ok","Error","data","json","error","console","alert","message","fetchStats","role","handleInputChange","e","name","type","checked","target","prev","handleServiceAreasChange","areas","split","map","area","trim","filter","handleImageSelect","file","files","startsWith","size","reader","FileReader","onload","result","readAsDataURL","uploadImage","removeSelectedImage","handleSubmit","preventDefault","announcementData","Date","toISOString","url","_id","method","body","JSON","stringify","resetForm","handleDelete","id","window","confirm","togglePublishStatus","announcement","togglePinStatus","startEditing","slice","getPriorityDisplay","option","find","opt","isExpired","className","children","onClick","placeholder","onChange","div","initial","opacity","y","animate","exit","onSubmit","required","maxLength","join","accept","htmlFor","src","alt","rows","length","disabled","index","_categoryOptions$find","_audienceOptions$find","priorityDisplay","PriorityIcon","transition","delay","cat","aud","toLocaleDateString","views","_categoryOptions$find2","_audienceOptions$find2","tr"],"sources":["C:/Users/Le520/Documents/Property-Maintainance-Service/src/pages/admin/AnnouncementManagement.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { \r\n  Plus, \r\n  Edit2, \r\n  Trash2, \r\n  Eye, \r\n  EyeOff,\r\n  Save,\r\n  X,\r\n  AlertTriangle,\r\n  Info,\r\n  Zap,\r\n  TrendingUp,\r\n  Pin,\r\n  PinOff,\r\n  FileText,\r\n  Upload,\r\n  Clock,\r\n  Users,\r\n  Search,\r\n  Grid,\r\n  List,\r\n  BarChart3\r\n} from 'lucide-react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n\r\nconst AnnouncementManagement = () => {\r\n  const { user } = useAuth();\r\n  const [announcements, setAnnouncements] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [editingAnnouncement, setEditingAnnouncement] = useState(null);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [selectedImage, setSelectedImage] = useState(null);\r\n  const [imagePreview, setImagePreview] = useState(null);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [viewMode, setViewMode] = useState('grid');\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    priority: '',\r\n    category: '',\r\n    targetAudience: '',\r\n    status: ''\r\n  });\r\n  const [stats, setStats] = useState({\r\n    overview: { total: 0, published: 0, urgent: 0, important: 0, expired: 0 },\r\n    priorityStats: [],\r\n    categoryStats: [],\r\n    audienceStats: []\r\n  });\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    content: '',\r\n    summary: '',\r\n    priority: 'normal',\r\n    targetAudience: 'all',\r\n    category: 'general',\r\n    serviceAreas: [],\r\n    isPublished: false,\r\n    expiresAt: '',\r\n    isPinned: false,\r\n    sendNotification: false,\r\n    imageUrl: '',\r\n    order: 0\r\n  });\r\n\r\n  // Priority options\r\n  const priorityOptions = [\r\n    { value: 'normal', label: 'Normal', icon: Info, color: 'orange' },\r\n    { value: 'important', label: 'Important', icon: AlertTriangle, color: 'yellow' },\r\n    { value: 'urgent', label: 'Urgent', icon: Zap, color: 'red' }\r\n  ];\r\n\r\n  // Category options\r\n  const categoryOptions = [\r\n    { value: 'general', label: 'General' },\r\n    { value: 'service-update', label: 'Service Update' },\r\n    { value: 'maintenance', label: 'Maintenance' },\r\n    { value: 'policy-change', label: 'Policy Change' },\r\n    { value: 'new-service', label: 'New Service' },\r\n    { value: 'pricing', label: 'Pricing' },\r\n    { value: 'system', label: 'System' },\r\n    { value: 'emergency', label: 'Emergency' }\r\n  ];\r\n\r\n  // Target audience options\r\n  const audienceOptions = [\r\n    { value: 'all', label: 'All Users' },\r\n    { value: 'customers', label: 'Customers' },\r\n    { value: 'vendors', label: 'Vendors' },\r\n    { value: 'admins', label: 'Admins' }\r\n  ];\r\n\r\n  // Fetch announcements\r\n  const fetchAnnouncements = async () => {\r\n    try {\r\n      const queryParams = new URLSearchParams();\r\n      Object.entries(filters).forEach(([key, value]) => {\r\n        if (value) queryParams.append(key, value);\r\n      });\r\n      \r\n      const response = await fetch(`/api/announcements?${queryParams}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      \r\n      if (!response.ok) throw new Error('Failed to fetch announcements');\r\n      \r\n      const data = await response.json();\r\n      setAnnouncements(data.announcements || []);\r\n    } catch (error) {\r\n      console.error('Error fetching announcements:', error);\r\n      alert('Failed to fetch announcements: ' + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Fetch statistics\r\n  const fetchStats = async () => {\r\n    try {\r\n      const response = await fetch('/api/announcements/stats', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      \r\n      if (!response.ok) throw new Error('Failed to fetch stats');\r\n      \r\n      const data = await response.json();\r\n      setStats(data);\r\n    } catch (error) {\r\n      console.error('Error fetching stats:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user?.role === 'admin') {\r\n      fetchAnnouncements();\r\n      fetchStats();\r\n    }\r\n  }, [user, filters]);\r\n\r\n  // Handle form input changes\r\n  const handleInputChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: type === 'checkbox' ? checked : value\r\n    }));\r\n  };\r\n\r\n  // Handle service areas input\r\n  const handleServiceAreasChange = (e) => {\r\n    const areas = e.target.value.split(',').map(area => area.trim()).filter(area => area);\r\n    setFormData(prev => ({ ...prev, serviceAreas: areas }));\r\n  };\r\n\r\n  // Handle image selection\r\n  const handleImageSelect = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      if (!file.type.startsWith('image/')) {\r\n        alert('Please select a valid image file');\r\n        return;\r\n      }\r\n      \r\n      if (file.size > 5 * 1024 * 1024) {\r\n        alert('Image size should be less than 5MB');\r\n        return;\r\n      }\r\n\r\n      setSelectedImage(file);\r\n      \r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setImagePreview(e.target.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  // Upload image (demo using base64)\r\n  const uploadImage = async () => {\r\n    if (!selectedImage) return null;\r\n    \r\n    setUploading(true);\r\n    try {\r\n      return imagePreview;\r\n    } catch (error) {\r\n      console.error('Image upload error:', error);\r\n      alert('Failed to process image: ' + error.message);\r\n      return null;\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  // Remove selected image\r\n  const removeSelectedImage = () => {\r\n    setSelectedImage(null);\r\n    setImagePreview(null);\r\n  };\r\n\r\n  // Submit announcement\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (!formData.title.trim() || !formData.content.trim() || !formData.summary.trim()) {\r\n        alert('Title, content, and summary are required');\r\n        return;\r\n      }\r\n\r\n      let imageUrl = formData.imageUrl;\r\n      if (selectedImage) {\r\n        imageUrl = await uploadImage();\r\n        if (!imageUrl) {\r\n          alert('Failed to upload image. Please try again.');\r\n          return;\r\n        }\r\n      }\r\n\r\n      const announcementData = {\r\n        ...formData,\r\n        imageUrl,\r\n        expiresAt: formData.expiresAt ? new Date(formData.expiresAt).toISOString() : null\r\n      };\r\n\r\n      const url = editingAnnouncement \r\n        ? `/api/announcements/${editingAnnouncement._id}`\r\n        : '/api/announcements';\r\n      \r\n      const method = editingAnnouncement ? 'PUT' : 'POST';\r\n\r\n      const response = await fetch(url, {\r\n        method,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n        body: JSON.stringify(announcementData)\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json();\r\n        throw new Error(error.message || 'Failed to save announcement');\r\n      }\r\n\r\n      alert(`Announcement ${editingAnnouncement ? 'updated' : 'created'} successfully!`);\r\n      await fetchAnnouncements();\r\n      await fetchStats();\r\n      resetForm();\r\n    } catch (error) {\r\n      console.error('Error saving announcement:', error);\r\n      alert('Error saving announcement: ' + error.message);\r\n    }\r\n  };\r\n\r\n  // Delete announcement\r\n  const handleDelete = async (id) => {\r\n    if (window.confirm('Are you sure you want to delete this announcement?')) {\r\n      try {\r\n        const response = await fetch(`/api/announcements/${id}`, {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        if (!response.ok) throw new Error('Failed to delete announcement');\r\n\r\n        await fetchAnnouncements();\r\n        await fetchStats();\r\n        alert('Announcement deleted successfully!');\r\n      } catch (error) {\r\n        console.error('Error deleting announcement:', error);\r\n        alert('Error deleting announcement: ' + error.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Toggle publish status\r\n  const togglePublishStatus = async (announcement) => {\r\n    try {\r\n      const response = await fetch(`/api/announcements/${announcement._id}/publish`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n        body: JSON.stringify({ isPublished: !announcement.isPublished })\r\n      });\r\n\r\n      if (!response.ok) throw new Error('Failed to update publish status');\r\n\r\n      await fetchAnnouncements();\r\n      await fetchStats();\r\n    } catch (error) {\r\n      console.error('Error updating publish status:', error);\r\n      alert('Error updating publish status: ' + error.message);\r\n    }\r\n  };\r\n\r\n  // Toggle pin status\r\n  const togglePinStatus = async (announcement) => {\r\n    try {\r\n      const response = await fetch(`/api/announcements/${announcement._id}/pin`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n        body: JSON.stringify({ isPinned: !announcement.isPinned })\r\n      });\r\n\r\n      if (!response.ok) throw new Error('Failed to update pin status');\r\n\r\n      await fetchAnnouncements();\r\n    } catch (error) {\r\n      console.error('Error updating pin status:', error);\r\n      alert('Error updating pin status: ' + error.message);\r\n    }\r\n  };\r\n\r\n  // Start editing\r\n  const startEditing = (announcement) => {\r\n    setEditingAnnouncement(announcement);\r\n    setFormData({\r\n      title: announcement.title,\r\n      content: announcement.content,\r\n      summary: announcement.summary,\r\n      priority: announcement.priority,\r\n      targetAudience: announcement.targetAudience,\r\n      category: announcement.category,\r\n      serviceAreas: announcement.serviceAreas,\r\n      isPublished: announcement.isPublished,\r\n      expiresAt: announcement.expiresAt ? new Date(announcement.expiresAt).toISOString().slice(0, 16) : '',\r\n      isPinned: announcement.isPinned,\r\n      sendNotification: announcement.sendNotification,\r\n      imageUrl: announcement.imageUrl || '',\r\n      order: announcement.order || 0\r\n    });\r\n    setShowForm(true);\r\n  };\r\n\r\n  // Reset form\r\n  const resetForm = () => {\r\n    setFormData({\r\n      title: '',\r\n      content: '',\r\n      summary: '',\r\n      priority: 'normal',\r\n      targetAudience: 'all',\r\n      category: 'general',\r\n      serviceAreas: [],\r\n      isPublished: false,\r\n      expiresAt: '',\r\n      isPinned: false,\r\n      sendNotification: false,\r\n      imageUrl: '',\r\n      order: 0\r\n    });\r\n    setEditingAnnouncement(null);\r\n    setShowForm(false);\r\n    setSelectedImage(null);\r\n    setImagePreview(null);\r\n    setUploading(false);\r\n  };\r\n\r\n  // Get priority icon and color\r\n  const getPriorityDisplay = (priority) => {\r\n    const option = priorityOptions.find(opt => opt.value === priority);\r\n    return option || priorityOptions[0];\r\n  };\r\n\r\n  // Check if announcement is expired\r\n  const isExpired = (announcement) => {\r\n    return announcement.expiresAt && new Date(announcement.expiresAt) < new Date();\r\n  };\r\n\r\n  if (user?.role !== 'admin') {\r\n    return (\r\n      <div className=\"text-center py-8\">\r\n        <p className=\"text-gray-600\">Access denied. Admin privileges required.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return <div className=\"text-center py-8\">Loading announcements...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Hero Header Section */}\r\n      <section className=\"relative bg-gradient-to-r from-orange-600 to-orange-800 text-white py-20\">\r\n        <div className=\"absolute inset-0 bg-black opacity-20\"></div>\r\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6\">\r\n            <div>\r\n              <h1 className=\"text-4xl md:text-5xl font-bold mb-4\">Announcement Management</h1>\r\n              <p className=\"text-xl text-orange-100 max-w-2xl\">\r\n                Keep your users informed with important updates, service announcements, and policy changes\r\n              </p>\r\n            </div>\r\n            <button\r\n              onClick={() => setShowForm(true)}\r\n              className=\"bg-white text-orange-600 px-8 py-4 rounded-lg hover:bg-orange-50 transition-all duration-200 flex items-center shadow-lg hover:shadow-xl transform hover:scale-105 font-semibold\"\r\n            >\r\n              <Plus className=\"w-5 h-5 mr-2\" />\r\n              Create Announcement\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-8 relative z-10\">\r\n        {/* Statistics Dashboard */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8\">\r\n          <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n            <div className=\"flex items-center\">\r\n              <div className=\"flex-shrink-0\">\r\n                <BarChart3 className=\"h-8 w-8 text-orange-600\" />\r\n              </div>\r\n              <div className=\"ml-4\">\r\n                <p className=\"text-sm font-medium text-gray-500\">Total</p>\r\n                <p className=\"text-2xl font-semibold text-gray-900\">{stats.overview.total}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n            <div className=\"flex items-center\">\r\n              <div className=\"flex-shrink-0\">\r\n                <Eye className=\"h-8 w-8 text-green-600\" />\r\n              </div>\r\n              <div className=\"ml-4\">\r\n                <p className=\"text-sm font-medium text-gray-500\">Published</p>\r\n                <p className=\"text-2xl font-semibold text-gray-900\">{stats.overview.published}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n            <div className=\"flex items-center\">\r\n              <div className=\"flex-shrink-0\">\r\n                <Zap className=\"h-8 w-8 text-red-600\" />\r\n              </div>\r\n              <div className=\"ml-4\">\r\n                <p className=\"text-sm font-medium text-gray-500\">Urgent</p>\r\n                <p className=\"text-2xl font-semibold text-gray-900\">{stats.overview.urgent}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n            <div className=\"flex items-center\">\r\n              <div className=\"flex-shrink-0\">\r\n                <AlertTriangle className=\"h-8 w-8 text-yellow-600\" />\r\n              </div>\r\n              <div className=\"ml-4\">\r\n                <p className=\"text-sm font-medium text-gray-500\">Important</p>\r\n                <p className=\"text-2xl font-semibold text-gray-900\">{stats.overview.important}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n            <div className=\"flex items-center\">\r\n              <div className=\"flex-shrink-0\">\r\n                <Clock className=\"h-8 w-8 text-gray-600\" />\r\n              </div>\r\n              <div className=\"ml-4\">\r\n                <p className=\"text-sm font-medium text-gray-500\">Expired</p>\r\n                <p className=\"text-2xl font-semibold text-gray-900\">{stats.overview.expired}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Filters and Search */}\r\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\">\r\n          <div className=\"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between\">\r\n            <div className=\"flex flex-col sm:flex-row gap-4 flex-1\">\r\n              <div className=\"relative flex-1 max-w-md\">\r\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search announcements...\"\r\n                  value={filters.search}\r\n                  onChange={(e) => setFilters(prev => ({ ...prev, search: e.target.value }))}\r\n                  className=\"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\r\n                />\r\n              </div>\r\n              \r\n              <select\r\n                value={filters.priority}\r\n                onChange={(e) => setFilters(prev => ({ ...prev, priority: e.target.value }))}\r\n                className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\r\n              >\r\n                <option value=\"\">All Priorities</option>\r\n                {priorityOptions.map(option => (\r\n                  <option key={option.value} value={option.value}>{option.label}</option>\r\n                ))}\r\n              </select>\r\n\r\n              <select\r\n                value={filters.category}\r\n                onChange={(e) => setFilters(prev => ({ ...prev, category: e.target.value }))}\r\n                className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\r\n              >\r\n                <option value=\"\">All Categories</option>\r\n                {categoryOptions.map(option => (\r\n                  <option key={option.value} value={option.value}>{option.label}</option>\r\n                ))}\r\n              </select>\r\n\r\n              <select\r\n                value={filters.status}\r\n                onChange={(e) => setFilters(prev => ({ ...prev, status: e.target.value }))}\r\n                className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\r\n              >\r\n                <option value=\"\">All Status</option>\r\n                <option value=\"active\">Active</option>\r\n                <option value=\"expired\">Expired</option>\r\n                <option value=\"draft\">Draft</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-2\">\r\n              <button\r\n                onClick={() => setViewMode('grid')}\r\n                className={`p-2 rounded-lg transition-colors ${viewMode === 'grid' ? 'bg-orange-100 text-orange-600' : 'text-gray-400 hover:text-gray-600'}`}\r\n              >\r\n                <Grid className=\"w-5 h-5\" />\r\n              </button>\r\n              <button\r\n                onClick={() => setViewMode('list')}\r\n                className={`p-2 rounded-lg transition-colors ${viewMode === 'list' ? 'bg-orange-100 text-orange-600' : 'text-gray-400 hover:text-gray-600'}`}\r\n              >\r\n                <List className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Announcement Form */}\r\n        <AnimatePresence>\r\n          {showForm && (\r\n            <motion.div\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -20 }}\r\n              className=\"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden mb-6\"\r\n            >\r\n              <div className=\"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <div>\r\n                    <h2 className=\"text-2xl font-bold text-gray-900\">\r\n                      {editingAnnouncement ? 'Edit Announcement' : 'Create New Announcement'}\r\n                    </h2>\r\n                    <p className=\"text-gray-600 mt-1\">\r\n                      {editingAnnouncement ? 'Update announcement details' : 'Share important updates with your users'}\r\n                    </p>\r\n                  </div>\r\n                  <button\r\n                    onClick={resetForm}\r\n                    className=\"text-gray-400 hover:text-gray-600 hover:bg-gray-200 p-2 rounded-full transition-all duration-200\"\r\n                  >\r\n                    <X className=\"w-6 h-6\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"p-6\">\r\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                  {/* Basic Information */}\r\n                  <div className=\"space-y-6\">\r\n                    <div className=\"border-b border-gray-200 pb-4\">\r\n                      <h3 className=\"text-lg font-semibold text-gray-900 flex items-center\">\r\n                        <FileText className=\"w-5 h-5 mr-2 text-orange-600\" />\r\n                        Basic Information\r\n                      </h3>\r\n                    </div>\r\n\r\n                    <div className=\"grid md:grid-cols-2 gap-6\">\r\n                      <div className=\"md:col-span-2\">\r\n                        <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                          Title <span className=\"text-red-500\">*</span>\r\n                        </label>\r\n                        <input\r\n                          type=\"text\"\r\n                          name=\"title\"\r\n                          value={formData.title}\r\n                          onChange={handleInputChange}\r\n                          required\r\n                          maxLength={200}\r\n                          placeholder=\"Enter announcement title\"\r\n                          className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\r\n                        />\r\n                      </div>\r\n\r\n                      <div>\r\n                        <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                          Priority <span className=\"text-red-500\">*</span>\r\n                        </label>\r\n                        <select\r\n                          name=\"priority\"\r\n                          value={formData.priority}\r\n                          onChange={handleInputChange}\r\n                          className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\r\n                        >\r\n                          {priorityOptions.map(option => (\r\n                            <option key={option.value} value={option.value}>{option.label}</option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n\r\n                      <div>\r\n                        <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                          Category <span className=\"text-red-500\">*</span>\r\n                        </label>\r\n                        <select\r\n                          name=\"category\"\r\n                          value={formData.category}\r\n                          onChange={handleInputChange}\r\n                          className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\r\n                        >\r\n                          {categoryOptions.map(option => (\r\n                            <option key={option.value} value={option.value}>{option.label}</option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n\r\n                      <div>\r\n                        <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                          Target Audience <span className=\"text-red-500\">*</span>\r\n                        </label>\r\n                        <select\r\n                          name=\"targetAudience\"\r\n                          value={formData.targetAudience}\r\n                          onChange={handleInputChange}\r\n                          className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\r\n                        >\r\n                          {audienceOptions.map(option => (\r\n                            <option key={option.value} value={option.value}>{option.label}</option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n\r\n                      <div>\r\n                        <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                          Expiration Date\r\n                        </label>\r\n                        <input\r\n                          type=\"datetime-local\"\r\n                          name=\"expiresAt\"\r\n                          value={formData.expiresAt}\r\n                          onChange={handleInputChange}\r\n                          className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"md:col-span-2\">\r\n                        <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                          Service Areas (optional)\r\n                        </label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={formData.serviceAreas.join(', ')}\r\n                          onChange={handleServiceAreasChange}\r\n                          placeholder=\"Kuala Lumpur, Selangor, Penang\"\r\n                          className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\r\n                        />\r\n                        <p className=\"text-xs text-gray-500 mt-1\">Leave empty to target all areas, or specify areas separated by commas</p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Image Upload */}\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                        Featured Image\r\n                      </label>\r\n                      \r\n                      {!imagePreview ? (\r\n                        <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-orange-400 transition-colors\">\r\n                          <input\r\n                            type=\"file\"\r\n                            accept=\"image/*\"\r\n                            onChange={handleImageSelect}\r\n                            className=\"hidden\"\r\n                            id=\"image-upload\"\r\n                          />\r\n                          <label htmlFor=\"image-upload\" className=\"cursor-pointer flex flex-col items-center space-y-2\">\r\n                            <Upload className=\"w-8 h-8 text-orange-600\" />\r\n                            <span className=\"text-orange-600 font-medium\">Upload Image</span>\r\n                            <p className=\"text-xs text-gray-500\">PNG, JPG up to 5MB</p>\r\n                          </label>\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"relative\">\r\n                          <img src={imagePreview} alt=\"Preview\" className=\"w-full h-48 object-cover rounded-lg\" />\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={removeSelectedImage}\r\n                            className=\"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600\"\r\n                          >\r\n                            <X className=\"w-4 h-4\" />\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Summary */}\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                        Summary <span className=\"text-red-500\">*</span>\r\n                      </label>\r\n                      <textarea\r\n                        name=\"summary\"\r\n                        value={formData.summary}\r\n                        onChange={handleInputChange}\r\n                        required\r\n                        maxLength={300}\r\n                        rows={3}\r\n                        placeholder=\"Brief summary of the announcement\"\r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none\"\r\n                      />\r\n                      <p className=\"text-xs text-gray-500 mt-1\">{formData.summary.length}/300 characters</p>\r\n                    </div>\r\n\r\n                    {/* Content */}\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                        Content <span className=\"text-red-500\">*</span>\r\n                      </label>\r\n                      <textarea\r\n                        name=\"content\"\r\n                        value={formData.content}\r\n                        onChange={handleInputChange}\r\n                        required\r\n                        rows={8}\r\n                        placeholder=\"Full announcement content\"\r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\r\n                      />\r\n                    </div>\r\n\r\n                    {/* Publishing Options */}\r\n                    <div className=\"grid md:grid-cols-3 gap-4\">\r\n                      <div className=\"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          name=\"isPublished\"\r\n                          checked={formData.isPublished}\r\n                          onChange={handleInputChange}\r\n                          className=\"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded\"\r\n                        />\r\n                        <label className=\"text-sm font-medium text-gray-700\">Publish immediately</label>\r\n                      </div>\r\n\r\n                      <div className=\"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          name=\"isPinned\"\r\n                          checked={formData.isPinned}\r\n                          onChange={handleInputChange}\r\n                          className=\"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded\"\r\n                        />\r\n                        <label className=\"text-sm font-medium text-gray-700\">Pin to top</label>\r\n                      </div>\r\n\r\n                      <div className=\"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          name=\"sendNotification\"\r\n                          checked={formData.sendNotification}\r\n                          onChange={handleInputChange}\r\n                          className=\"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded\"\r\n                        />\r\n                        <label className=\"text-sm font-medium text-gray-700\">Send notification</label>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Form Actions */}\r\n                  <div className=\"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200\">\r\n                    <button\r\n                      type=\"submit\"\r\n                      disabled={uploading}\r\n                      className=\"flex-1 sm:flex-none bg-orange-600 text-white px-8 py-3 rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center font-semibold disabled:opacity-50\"\r\n                    >\r\n                      <Save className=\"w-5 h-5 mr-2\" />\r\n                      {editingAnnouncement ? 'Update' : 'Create'} Announcement\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={resetForm}\r\n                      className=\"flex-1 sm:flex-none bg-gray-200 text-gray-700 px-8 py-3 rounded-lg hover:bg-gray-300 transition-colors flex items-center justify-center font-semibold\"\r\n                    >\r\n                      <X className=\"w-5 h-5 mr-2\" />\r\n                      Cancel\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n\r\n        {/* Announcements List */}\r\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\r\n          <div className=\"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200\">\r\n            <div className=\"flex justify-between items-center\">\r\n              <div>\r\n                <h2 className=\"text-2xl font-bold text-gray-900\">All Announcements</h2>\r\n                <p className=\"text-gray-600 mt-1\">Manage your system announcements</p>\r\n              </div>\r\n              <div className=\"text-sm text-gray-500\">\r\n                {announcements.length} {announcements.length === 1 ? 'announcement' : 'announcements'}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"p-6\">\r\n            {announcements.length === 0 ? (\r\n              <div className=\"text-center py-12\">\r\n                <div className=\"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4\">\r\n                  <FileText className=\"w-12 h-12 text-gray-400\" />\r\n                </div>\r\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No announcements yet</h3>\r\n                <p className=\"text-gray-500 mb-6 max-w-sm mx-auto\">\r\n                  Create your first announcement to keep users informed about important updates.\r\n                </p>\r\n                <button\r\n                  onClick={() => setShowForm(true)}\r\n                  className=\"bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700 transition-colors\"\r\n                >\r\n                  Create Your First Announcement\r\n                </button>\r\n              </div>\r\n            ) : viewMode === 'grid' ? (\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                {announcements.map((announcement, index) => {\r\n                  const priorityDisplay = getPriorityDisplay(announcement.priority);\r\n                  const PriorityIcon = priorityDisplay.icon;\r\n                  const expired = isExpired(announcement);\r\n\r\n                  return (\r\n                    <motion.div\r\n                      key={announcement._id}\r\n                      initial={{ opacity: 0, y: 20 }}\r\n                      animate={{ opacity: 1, y: 0 }}\r\n                      transition={{ delay: index * 0.1 }}\r\n                      className={`border rounded-lg p-6 hover:shadow-md transition-all duration-200 ${\r\n                        expired ? 'border-gray-300 bg-gray-50' : 'border-gray-200 bg-white'\r\n                      }`}\r\n                    >\r\n                      <div className=\"flex items-start justify-between mb-4\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <PriorityIcon className={`w-5 h-5 text-${priorityDisplay.color}-600`} />\r\n                          <span className={`px-2 py-1 rounded-full text-xs font-medium bg-${priorityDisplay.color}-100 text-${priorityDisplay.color}-800`}>\r\n                            {priorityDisplay.label}\r\n                          </span>\r\n                          {announcement.isPinned && (\r\n                            <Pin className=\"w-4 h-4 text-yellow-600\" />\r\n                          )}\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <button\r\n                            onClick={() => togglePublishStatus(announcement)}\r\n                            className={`p-1 rounded transition-colors ${\r\n                              announcement.isPublished \r\n                                ? 'text-green-600 hover:text-green-800' \r\n                                : 'text-gray-400 hover:text-gray-600'\r\n                            }`}\r\n                          >\r\n                            {announcement.isPublished ? <Eye className=\"w-4 h-4\" /> : <EyeOff className=\"w-4 h-4\" />}\r\n                          </button>\r\n                          <button\r\n                            onClick={() => togglePinStatus(announcement)}\r\n                            className={`p-1 rounded transition-colors ${\r\n                              announcement.isPinned \r\n                                ? 'text-yellow-600 hover:text-yellow-800' \r\n                                : 'text-gray-400 hover:text-yellow-600'\r\n                            }`}\r\n                          >\r\n                            {announcement.isPinned ? <Pin className=\"w-4 h-4\" /> : <PinOff className=\"w-4 h-4\" />}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <h3 className={`font-semibold mb-2 ${expired ? 'text-gray-500' : 'text-gray-900'}`}>\r\n                        {announcement.title}\r\n                      </h3>\r\n                      \r\n                      <p className={`text-sm mb-4 line-clamp-3 ${expired ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                        {announcement.summary}\r\n                      </p>\r\n\r\n                      <div className=\"flex items-center justify-between text-xs text-gray-500 mb-4\">\r\n                        <span className={`px-2 py-1 rounded bg-gray-100 ${expired ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                          {categoryOptions.find(cat => cat.value === announcement.category)?.label}\r\n                        </span>\r\n                        <span className={`flex items-center ${expired ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                          <Users className=\"w-3 h-3 mr-1\" />\r\n                          {audienceOptions.find(aud => aud.value === announcement.targetAudience)?.label}\r\n                        </span>\r\n                      </div>\r\n\r\n                      {expired && (\r\n                        <div className=\"flex items-center text-xs text-red-500 mb-4\">\r\n                          <Clock className=\"w-3 h-3 mr-1\" />\r\n                          Expired on {new Date(announcement.expiresAt).toLocaleDateString()}\r\n                        </div>\r\n                      )}\r\n\r\n                      <div className=\"flex items-center justify-between pt-4 border-t border-gray-200\">\r\n                        <div className=\"flex items-center space-x-2 text-xs text-gray-500\">\r\n                          <TrendingUp className=\"w-3 h-3\" />\r\n                          <span>{announcement.views || 0} views</span>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <button\r\n                            onClick={() => startEditing(announcement)}\r\n                            className=\"text-indigo-600 hover:text-indigo-800 transition-colors\"\r\n                          >\r\n                            <Edit2 className=\"w-4 h-4\" />\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleDelete(announcement._id)}\r\n                            className=\"text-red-600 hover:text-red-800 transition-colors\"\r\n                          >\r\n                            <Trash2 className=\"w-4 h-4\" />\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </motion.div>\r\n                  );\r\n                })}\r\n              </div>\r\n            ) : (\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full\">\r\n                  <thead>\r\n                    <tr className=\"border-b-2 border-gray-200 bg-gray-50\">\r\n                      <th className=\"text-left py-4 px-4 font-semibold text-gray-700 text-sm\">Title</th>\r\n                      <th className=\"text-left py-4 px-4 font-semibold text-gray-700 text-sm\">Priority</th>\r\n                      <th className=\"text-left py-4 px-4 font-semibold text-gray-700 text-sm\">Category</th>\r\n                      <th className=\"text-left py-4 px-4 font-semibold text-gray-700 text-sm\">Audience</th>\r\n                      <th className=\"text-left py-4 px-4 font-semibold text-gray-700 text-sm\">Status</th>\r\n                      <th className=\"text-left py-4 px-4 font-semibold text-gray-700 text-sm\">Views</th>\r\n                      <th className=\"text-left py-4 px-4 font-semibold text-gray-700 text-sm\">Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody className=\"divide-y divide-gray-200\">\r\n                    {announcements.map((announcement, index) => {\r\n                      const priorityDisplay = getPriorityDisplay(announcement.priority);\r\n                      const PriorityIcon = priorityDisplay.icon;\r\n                      const expired = isExpired(announcement);\r\n\r\n                      return (\r\n                        <motion.tr\r\n                          key={announcement._id}\r\n                          initial={{ opacity: 0, y: 20 }}\r\n                          animate={{ opacity: 1, y: 0 }}\r\n                          transition={{ delay: index * 0.1 }}\r\n                          className={`hover:bg-gray-50 transition-colors ${expired ? 'opacity-60' : ''}`}\r\n                        >\r\n                          <td className=\"py-4 px-4\">\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              {announcement.isPinned && <Pin className=\"w-4 h-4 text-yellow-600\" />}\r\n                              <div>\r\n                                <h3 className=\"font-semibold text-gray-900 text-sm\">{announcement.title}</h3>\r\n                                <p className=\"text-xs text-gray-500 mt-1 line-clamp-2\">\r\n                                  {announcement.summary}\r\n                                </p>\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"py-4 px-4\">\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              <PriorityIcon className={`w-4 h-4 text-${priorityDisplay.color}-600`} />\r\n                              <span className={`px-2 py-1 rounded-full text-xs font-medium bg-${priorityDisplay.color}-100 text-${priorityDisplay.color}-800`}>\r\n                                {priorityDisplay.label}\r\n                              </span>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"py-4 px-4\">\r\n                            <span className=\"px-2 py-1 rounded bg-gray-100 text-gray-700 text-xs\">\r\n                              {categoryOptions.find(cat => cat.value === announcement.category)?.label}\r\n                            </span>\r\n                          </td>\r\n                          <td className=\"py-4 px-4\">\r\n                            <span className=\"text-sm text-gray-600\">\r\n                              {audienceOptions.find(aud => aud.value === announcement.targetAudience)?.label}\r\n                            </span>\r\n                          </td>\r\n                          <td className=\"py-4 px-4\">\r\n                            <div className=\"flex flex-col space-y-1\">\r\n                              <button\r\n                                onClick={() => togglePublishStatus(announcement)}\r\n                                className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium transition-colors ${\r\n                                  announcement.isPublished \r\n                                    ? 'bg-green-100 text-green-800 hover:bg-green-200' \r\n                                    : 'bg-yellow-100 text-yellow-800 hover:bg-yellow-200'\r\n                                }`}\r\n                              >\r\n                                {announcement.isPublished ? (\r\n                                  <><Eye className=\"w-3 h-3 mr-1\" /> Published</>\r\n                                ) : (\r\n                                  <><EyeOff className=\"w-3 h-3 mr-1\" /> Draft</>\r\n                                )}\r\n                              </button>\r\n                              {expired && (\r\n                                <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800\">\r\n                                  <Clock className=\"w-3 h-3 mr-1\" /> Expired\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"py-4 px-4\">\r\n                            <div className=\"flex items-center text-sm text-gray-600\">\r\n                              <TrendingUp className=\"w-4 h-4 mr-2 text-gray-400\" />\r\n                              <span>{announcement.views || 0}</span>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"py-4 px-4\">\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              <button\r\n                                onClick={() => togglePinStatus(announcement)}\r\n                                className={`transition-colors ${\r\n                                  announcement.isPinned \r\n                                    ? 'text-yellow-600 hover:text-yellow-800' \r\n                                    : 'text-gray-400 hover:text-yellow-600'\r\n                                }`}\r\n                              >\r\n                                {announcement.isPinned ? <Pin className=\"w-4 h-4\" /> : <PinOff className=\"w-4 h-4\" />}\r\n                              </button>\r\n                              <button\r\n                                onClick={() => startEditing(announcement)}\r\n                                className=\"text-indigo-600 hover:text-indigo-800 transition-colors\"\r\n                              >\r\n                                <Edit2 className=\"w-4 h-4\" />\r\n                              </button>\r\n                              <button\r\n                                onClick={() => handleDelete(announcement._id)}\r\n                                className=\"text-red-600 hover:text-red-800 transition-colors\"\r\n                              >\r\n                                <Trash2 className=\"w-4 h-4\" />\r\n                              </button>\r\n                            </div>\r\n                          </td>\r\n                        </motion.tr>\r\n                      );\r\n                    })}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AnnouncementManagement;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}